<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="335px" preserveAspectRatio="none" style="width:669px;height:335px;" version="1.1" viewBox="0 0 669 335" width="669px" zoomAndPan="magnify"><defs><filter height="300%" id="fw60vk8wl0db9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f1acfe1cbe5dfcfb7814d367240024fe]
cluster component-mgmt--><polygon fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" points="22,24,150,24,157,49.1201,411,49.1201,411,227,22,227,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="157" y1="49.1201" y2="49.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="26" y="42.0439">component-mgmt</text><!--MD5=[8c2987afbd2243247df680adfb5041a3]
class component API--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="148.915" id="component API" style="stroke: #33335B; stroke-width: 1.5;" width="177" x="38.5" y="62"/><ellipse cx="81.4" cy="83.3887" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M79.9781,88.748 Q78.1188,88.748 77.025,87.3574 Q75.9313,85.9668 75.9313,82.9824 Q75.9313,80.4512 77.0953,78.7949 Q78.2594,77.1387 80.2438,77.1387 Q81.7125,77.1387 82.1813,77.2637 Q82.65,77.4668 82.65,77.4668 Q82.65,77.4668 82.65,77.3965 Q82.65,77.3262 83.2594,76.4043 L84.3063,80.0605 L82.9781,80.4668 Q82.5094,78.9199 81.8453,78.2559 Q81.1813,77.5918 80.1188,77.5918 Q79.7281,77.5918 78.9625,79.123 Q78.1969,80.6543 78.1969,82.9043 Q78.1969,85.373 78.8609,86.7637 Q79.525,88.1543 80.0563,88.1543 Q81.1188,88.1543 81.8766,87.3887 Q82.6344,86.623 82.9781,84.9668 L84.3063,85.5605 Q83.9781,86.9668 83.0797,87.8574 Q82.1813,88.748 79.9781,88.748 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="34" x="126.1" y="80.752">«unit»</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="101.6" y="97.1406">component API</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="214.5" y1="104.7773" y2="104.7773"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="9" x="44.5" y="121.3833">...</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="214.5" y1="127.8003" y2="127.8003"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="44.5" y="144.4063">comp_new(sof_ipc_comp*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="44.5" y="159.4292">comp_register(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="44.5" y="174.4521">comp_unregister(comp_driver*)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="44.5" y="189.4751">comp_set_state(comp_dev*, cmd)</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="44.5" y="204.498">sys_comp_init(void)</text><!--MD5=[9ec976ca96a556f71ff5670325ac6e3f]
class comp_data--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="55.0229" id="comp_data" style="stroke: #33335B; stroke-width: 1.5;" width="94" x="301" y="109"/><ellipse cx="316" cy="125" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M314.5781,130.3594 Q312.7188,130.3594 311.625,128.9688 Q310.5313,127.5781 310.5313,124.5938 Q310.5313,122.0625 311.6953,120.4063 Q312.8594,118.75 314.8438,118.75 Q316.3125,118.75 316.7813,118.875 Q317.25,119.0781 317.25,119.0781 Q317.25,119.0781 317.25,119.0078 Q317.25,118.9375 317.8594,118.0156 L318.9063,121.6719 L317.5781,122.0781 Q317.1094,120.5313 316.4453,119.8672 Q315.7813,119.2031 314.7188,119.2031 Q314.3281,119.2031 313.5625,120.7344 Q312.7969,122.2656 312.7969,124.5156 Q312.7969,126.9844 313.4609,128.375 Q314.125,129.7656 314.6563,129.7656 Q315.7188,129.7656 316.4766,129 Q317.2344,128.2344 317.5781,126.5781 L318.9063,127.1719 Q318.5781,128.5781 317.6797,129.4688 Q316.7813,130.3594 314.5781,130.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="330" y="130.5576">comp_data</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="302" x2="394" y1="141" y2="141"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="13" x="307" y="157.606">list</text><path d="M430.5,113.5 L430.5,132.5 L395.09,136.5 L430.5,140.5 L430.5,159.0088 A0,0 0 0 0 430.5,159.0088 L657.5,159.0088 A0,0 0 0 0 657.5,159.0088 L657.5,123.5 L647.5,113.5 L430.5,113.5 A0,0 0 0 0 430.5,113.5 " fill="#F6ED80" filter="url(#fw60vk8wl0db9)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M647.5,113.5 L647.5,123.5 L657.5,123.5 L647.5,113.5 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="436.5" y="133.3979">Singleton allocated in RZONE_SYS</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="436.5" y="151.1523">by sys_comp_init()</text><!--MD5=[8c61665d9a482ae36487effce834807d]
class comp_driver--><rect fill="#FFFFFF" filter="url(#fw60vk8wl0db9)" height="32" id="comp_driver" style="stroke: #33335B; stroke-width: 1.5;" width="100" x="187" y="292"/><ellipse cx="202" cy="308" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M200.5781,313.3594 Q198.7188,313.3594 197.625,311.9688 Q196.5313,310.5781 196.5313,307.5938 Q196.5313,305.0625 197.6953,303.4063 Q198.8594,301.75 200.8438,301.75 Q202.3125,301.75 202.7813,301.875 Q203.25,302.0781 203.25,302.0781 Q203.25,302.0781 203.25,302.0078 Q203.25,301.9375 203.8594,301.0156 L204.9063,304.6719 L203.5781,305.0781 Q203.1094,303.5313 202.4453,302.8672 Q201.7813,302.2031 200.7188,302.2031 Q200.3281,302.2031 199.5625,303.7344 Q198.7969,305.2656 198.7969,307.5156 Q198.7969,309.9844 199.4609,311.375 Q200.125,312.7656 200.6563,312.7656 Q201.7188,312.7656 202.4766,312 Q203.2344,311.2344 203.5781,309.5781 L204.9063,310.1719 Q204.5781,311.5781 203.6797,312.4688 Q202.7813,313.3594 200.5781,313.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="68" x="216" y="313.5576">comp_driver</text><!--MD5=[795bb5bf7752784e59032142a6e0c9fe]
link component API to comp_data--><path d="M215.62,136.5 C242.86,136.5 271.95,136.5 295.9,136.5 " fill="none" id="component API-&gt;comp_data" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="300.94,136.5,291.94,132.5,295.94,136.5,291.94,140.5,300.94,136.5" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="233.75" y="130.3979">drv_get()</text><!--MD5=[155639e074ff65daf4fa6a8332482b0a]
reverse link component API to comp_driver--><path d="M131.96,216.19 C135.84,232.48 142.08,248.71 152,262 C161.89,275.25 176.84,284.98 191.46,291.93 " fill="none" id="component API&lt;-comp_driver" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="130.83,211.13,128.8776,220.7834,131.9147,216.0109,136.6871,219.048,130.83,211.13" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="153" y="258.8979">registers in comp_register()</text><!--MD5=[143383bb7191b780bde7f1444e63c227]
link comp_driver to comp_data--><path d="M277.35,291.84 C291.42,284.73 306.13,274.92 316,262 C334.63,237.61 342.48,203.49 345.75,177.14 " fill="none" id="comp_driver-&gt;comp_data" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="347.08,164.16,342.4876,169.7197,345.8533,176.0971,350.4457,170.5375,347.08,164.16" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[ea2790a79c8bab98ab42aae16b7ba069]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
package component-mgmt {
   class "component API" <<unit>> {
   	comp_new(sof_ipc_comp*)
   	comp_register(comp_driver*)
   	comp_unregister(comp_driver*)
   	comp_set_state(comp_dev*, cmd)
   	...
   	sys_comp_init(void)
   }

   class comp_data {
   	list
   }
   hide comp_data methods

   "component API" -right-> comp_data : drv_get()

}
note right of comp_data
   Singleton allocated in RZONE_SYS
   by sys_comp_init()
end note

"component API" <-up- comp_driver : registers in comp_register()

comp_driver -o comp_data

hide comp_driver members
hide comp_driver methods

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>