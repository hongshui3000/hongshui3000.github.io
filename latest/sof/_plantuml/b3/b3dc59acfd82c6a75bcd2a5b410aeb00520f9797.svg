<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1560px" preserveAspectRatio="none" style="width:903px;height:1560px;" version="1.1" viewBox="0 0 903 1560" width="903px" zoomAndPan="magnify"><defs><filter height="300%" id="fpu2klcejphzp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="337" cy="18" fill="#000000" filter="url(#fpu2klcejphzp)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="71.8975" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="178" x="248" y="178"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="248" x2="426" y1="207.1201" y2="207.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="286" y="199.0439">KPB_DISABLED</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="253" y="225.8721">Starting state of KPB -</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="253" y="242.2607">No action has been taken yet</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="236" x="219" y="347"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="219" x2="455" y1="376.1201" y2="376.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="286.5" y="368.0439">KPB_CREATED</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="216" x="224" y="394.8721">New KPB component has been created</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="233" x="220.5" y="500"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="220.5" x2="453.5" y1="529.1201" y2="529.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="280" y="521.0439">KPB_PREPARING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="213" x="225.5" y="547.8721">Prepare Key Phrase Buffer component.</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="170" x="111" y="653"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="111" x2="281" y1="682.1201" y2="682.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="138" y="674.0439">KPB_STATE_RUN</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="150" x="116" y="700.8721">KPB is prepared and ready.</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="204" x="214" y="904"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="214" x2="418" y1="933.1201" y2="933.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="184" x="224" y="925.0439">KPB_STATE_INIT_DRAINING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="219" y="951.8721">KPB received detection event</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="71.8975" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="194" x="207" y="1208"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="207" x2="401" y1="1237.1201" y2="1237.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="221" y="1229.0439">KPB_STATE_BUFFERING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="171" x="212" y="1255.8721">Buffer incoming samples in the</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="212" y="1272.2607">internal history buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="71.8975" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="225" x="383.5" y="1039"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="383.5" x2="608.5" y1="1068.1201" y2="1068.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="420" y="1060.0439">KPB_STATE_DRAINING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="202" x="388.5" y="1086.8721">KPB is draining internal history buffer</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="388.5" y="1103.2607">to the client's buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="210" x="402" y="1377"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="402" x2="612" y1="1406.1201" y2="1406.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="424" y="1398.0439">KPB_STATE_RESETTING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="190" x="407" y="1424.8721">KPB is preparing itself for the reset</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="71.8975" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="193" x="577.5" y="1208"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="577.5" x2="770.5" y1="1237.1201" y2="1237.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="587.5" y="1229.0439">KPB_STATE_HOST_COPY</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="133" x="582.5" y="1255.8721">KPB is copying real time</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="582.5" y="1272.2607">stream into client's buffer</text><rect fill="#FFFFFF" filter="url(#fpu2klcejphzp)" height="55.5088" rx="12.5" ry="12.5" style="stroke: #33335B; stroke-width: 1.5;" width="227" x="551.5" y="1494"/><line style="stroke: #33335B; stroke-width: 1.5;" x1="551.5" x2="778.5" y1="1523.1201" y2="1523.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="207" x="561.5" y="1515.0439">KPB_STATE_RESET_FINISHING</text><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="556.5" y="1541.8721">KPB is finishing reset sequence</text><!--MD5=[a96ad61178f7b2cabd3e386b6819c08d]
link *start to KPB_DISABLED--><path d="M337,28.1 C337,53.49 337,126.29 337,172.61 " fill="none" id="*start-&gt;KPB_DISABLED" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="337,177.84,341,168.84,337,172.84,333,168.84,337,177.84" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="371" y="73.8979">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="381.5" y="91.6523">or</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="360" y="109.4067">[IPC] free</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="358.5" y="127.1611">message</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="338" y="144.9155">from either  state</text><!--MD5=[044e16ce5a5ff76d7deff6458927d5e4]
link KPB_DISABLED to KPB_CREATED--><path d="M337,250.29 C337,277.65 337,315.25 337,341.8 " fill="none" id="KPB_DISABLED-&gt;KPB_CREATED" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="337,346.96,341,337.96,337,341.96,333,337.96,337,346.96" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="367" y="295.8979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="338" y="313.6523">new component</text><!--MD5=[b834d8c16a5a27e806c00976e4b09383]
link KPB_DISABLED to KPB_DISABLED--><path d="M426.17,198.63 C446.29,200.02 461,205.14 461,214 C461,222.1 448.71,227.07 431.23,228.93 " fill="none" id="KPB_DISABLED-&gt;KPB_DISABLED" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="426.17,229.37,435.4795,232.5845,431.1516,228.9418,434.7944,224.6139,426.17,229.37" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="467" y="211.3979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="469" y="229.1523">reset</text><!--MD5=[52af3ccfc34184d00955491461cb3f4c]
link KPB_CREATED to KPB_PREPARING--><path d="M337,403.34 C337,429 337,467.39 337,494.58 " fill="none" id="KPB_CREATED-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="337,499.86,341,490.86,337,494.86,333,490.86,337,499.86" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="357.5" y="448.8979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="338" y="466.6523">pcm params</text><!--MD5=[3b752fd7ec54ca6937fb956cb5f07361]
link KPB_CREATED to KPB_CREATED--><path d="M455.04,361.64 C475.66,363.42 490,367.88 490,375 C490,381.51 478.02,385.79 460.21,387.84 " fill="none" id="KPB_CREATED-&gt;KPB_CREATED" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="455.04,388.36,464.3951,391.4393,460.0149,387.8597,463.5945,383.4794,455.04,388.36" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="496" y="372.3979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="498" y="390.1523">reset</text><!--MD5=[da49dfad7d01193c3fc3fbbf8319390b]
link KPB_PREPARING to KPB_STATE_RUN--><path d="M245.93,556.11 C232.15,563.79 219.41,573.58 210,586 C196.83,603.38 193.53,627.88 193.41,647.5 " fill="none" id="KPB_PREPARING-&gt;KPB_STATE_RUN" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="193.46,652.64,197.3825,643.6059,193.417,647.6402,189.3828,643.6747,193.46,652.64" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="211" y="610.8979">Success</text><!--MD5=[42183d866f21e1e4c85eae516064ca23]
link KPB_STATE_RUN to KPB_PREPARING--><path d="M233.29,652.97 C244.64,644 256.8,633.58 267,623 C285.51,603.8 303.42,579.62 316.49,560.59 " fill="none" id="KPB_STATE_RUN-&gt;KPB_PREPARING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="319.37,556.36,310.9956,561.5436,316.5538,560.4914,317.6059,566.0496,319.37,556.36" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="300" y="601.8979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="302" y="619.6523">reset</text><!--MD5=[b1723bc524c5751ca1c60041e9b9ac33]
link KPB_PREPARING to KPB_PREPARING--><path d="M453.56,521.31 C474.15,522.19 488.5,524.42 488.5,528 C488.5,531.27 476.51,533.42 458.72,534.44 " fill="none" id="KPB_PREPARING-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="453.56,534.69,462.744,538.2474,458.5541,534.4467,462.3547,530.2569,453.56,534.69" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="494.5" y="534.3979">Failure</text><!--MD5=[b1723bc524c5751ca1c60041e9b9ac33]
link KPB_PREPARING to KPB_PREPARING--><path d="M453.7,513.8 C500.04,513.19 539.5,517.92 539.5,528 C539.5,537.7 502.91,542.45 458.83,542.24 " fill="none" id="KPB_PREPARING-&gt;KPB_PREPARING-1" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="453.7,542.2,462.6654,546.277,458.6998,542.2429,462.734,538.2773,453.7,542.2" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="545.5" y="525.3979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="547.5" y="543.1523">reset</text><!--MD5=[43e61fe3fa960cff5339b212e4ea77e2]
link KPB_STATE_RUN to KPB_STATE_INIT_DRAINING--><path d="M195.41,709.02 C195.79,742.43 200.14,800.1 223,843 C234.95,865.43 254.78,885.38 273.07,900.59 " fill="none" id="KPB_STATE_RUN-&gt;KPB_STATE_INIT_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="277.19,903.96,272.7626,895.1624,273.3221,900.7915,267.693,901.351,277.19,903.96" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="255.5" y="821.8979">[EVENT]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="224" y="839.6523">key phrase detected</text><!--MD5=[1ed0152a32d0d54fbde3ed23e7d2bdd1]
link KPB_STATE_RUN to KPB_STATE_BUFFERING--><path d="M166.21,709.25 C140.68,735.7 108,778.37 108,823.5 C108,823.5 108,823.5 108,1076 C108,1135.45 160.89,1178.2 211.72,1205.56 " fill="none" id="KPB_STATE_RUN-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="216.32,1207.99,210.2455,1200.2375,211.9035,1205.646,206.4951,1207.3039,216.32,1207.99" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="117" y="929.3979">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="109" y="947.1523">buffering</text><!--MD5=[1d54e21577cd2257cfdae3717ae928f9]
link KPB_STATE_BUFFERING to KPB_STATE_RUN--><path d="M206.84,1229.6 C119.87,1211.49 6,1169.85 6,1076 C6,823.5 6,823.5 6,823.5 C6,769.01 56.88,733.03 105.98,710.98 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_RUN" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="110.73,708.89,100.8811,708.8843,106.1598,710.918,104.126,716.1967,110.73,708.89" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="7" y="938.3979">Done</text><!--MD5=[3d191e6f8f90b05a668f23906de587dc]
link KPB_STATE_BUFFERING to KPB_STATE_INIT_DRAINING--><path d="M305.36,1208 C307.7,1147.45 312.48,1024.04 314.75,965.37 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_INIT_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="314.95,960.24,310.6187,969.0853,314.7644,965.2366,318.6132,969.3823,314.95,960.24" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="313" y="1081.3979">Done</text><!--MD5=[6d387181e1f1c9221add11212d4f3645]
link KPB_STATE_INIT_DRAINING to KPB_STATE_BUFFERING--><path d="M293.78,960.28 C278.72,980.61 260.13,1009.8 252,1039 C236.19,1095.79 260.94,1161.99 281.42,1203.21 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="283.76,1207.86,283.3002,1198.0219,281.5182,1203.3907,276.1494,1201.6087,283.76,1207.86" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="261" y="1072.3979">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="253" y="1090.1523">buffering</text><!--MD5=[beb4316903d21c80264370acaefdc004]
link KPB_STATE_BUFFERING to KPB_STATE_DRAINING--><path d="M316.45,1207.75 C325.51,1186.24 339.6,1159.43 359,1141 C370.06,1130.49 383.14,1121.41 396.74,1113.65 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="401.38,1111.07,391.5712,1111.9578,397.0126,1113.5043,395.4661,1118.9456,401.38,1111.07" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="360" y="1165.8979">Done</text><!--MD5=[4f12acaa4d93a796508a9e19d0b02b6e]
link KPB_STATE_DRAINING to KPB_STATE_BUFFERING--><path d="M460.49,1111.33 C450.89,1120.93 440.53,1131.34 431,1141 C414.89,1157.33 412.4,1163.05 395,1178 C384.38,1187.13 372.51,1196.27 360.95,1204.7 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_BUFFERING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="356.71,1207.77,366.3404,1205.7074,360.7524,1204.8274,361.6324,1199.2394,356.71,1207.77" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="440" y="1156.8979">Start</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="432" y="1174.6523">buffering</text><!--MD5=[f1324a9450b1f6c410abd131b77de762]
link KPB_STATE_BUFFERING to KPB_STATE_RESETTING--><path d="M348.8,1280.09 C384.59,1308.12 434.23,1347.01 468.31,1373.7 " fill="none" id="KPB_STATE_BUFFERING-&gt;KPB_STATE_RESETTING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="472.39,1376.89,467.783,1368.1851,468.4579,1373.8015,462.8415,1374.4764,472.39,1376.89" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="431" y="1325.8979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="433" y="1343.6523">reset</text><!--MD5=[4b438634278f58e15749aa816f5b0dd3]
link KPB_STATE_INIT_DRAINING to KPB_PREPARING--><path d="M328.24,903.9 C335.27,886.81 343.4,864.08 347,843 C364.4,741.24 350.6,618.29 342.23,561.13 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_PREPARING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="341.49,556.13,338.8452,565.6171,342.2191,561.0766,346.7597,564.4505,341.49,556.13" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="357" y="754.8979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="359" y="772.6523">reset</text><!--MD5=[8890fde5015e216095d91bf0e7f33a49]
link KPB_STATE_INIT_DRAINING to KPB_STATE_DRAINING--><path d="M350.71,960.19 C378.08,981.63 416.6,1011.8 447.1,1035.7 " fill="none" id="KPB_STATE_INIT_DRAINING-&gt;KPB_STATE_DRAINING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="451.16,1038.87,446.5377,1030.1732,447.2225,1035.7885,441.6072,1036.4732,451.16,1038.87" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="413" y="1005.8979">Draining task starts</text><!--MD5=[3dd8c2db77a16219417454f287f13692]
link KPB_STATE_DRAINING to KPB_STATE_HOST_COPY--><path d="M533.31,1111.01 C562.29,1138.19 602.45,1175.87 632.45,1204.02 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_HOST_COPY" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="636.43,1207.75,632.5999,1198.6764,632.7823,1204.3303,627.1284,1204.5127,636.43,1207.75" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="601" y="1165.8979">Draining done</text><!--MD5=[38744a42fe084230deab8a275c68be48]
link KPB_STATE_DRAINING to KPB_STATE_RESETTING--><path d="M497.18,1111.1 C499.32,1175.08 503.84,1309.75 505.91,1371.64 " fill="none" id="KPB_STATE_DRAINING-&gt;KPB_STATE_RESETTING" style="stroke: #0000FF; stroke-width: 1.0;"/><polygon fill="#0000FF" points="506.08,1376.69,509.7693,1367.5582,505.9087,1371.6929,501.774,1367.8323,506.08,1376.69" style="stroke: #0000FF; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="503" y="1241.3979">[IPC]</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="505" y="1259.1523">reset</text><!--MD5=[86f8ade4edda463563b246265fa6922a]
link KPB_STATE_RESETTING to KPB_STATE_RESET_FINISHING--><path d="M544.44,1433.25 C568.25,1450.58 599.1,1473.04 623.63,1490.89 " fill="none" id="KPB_STATE_RESETTING-&gt;KPB_STATE_RESET_FINISHING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="627.82,1493.94,622.8976,1485.4094,623.7776,1490.9974,618.1896,1491.8774,627.82,1493.94" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[cb0076cfc3bf4c60d180f90ff9ff4ba5]
link KPB_STATE_RESET_FINISHING to KPB_PREPARING--><path d="M749.62,1493.84 C787.59,1475.86 824,1447.73 824,1406 C824,680 824,680 824,680 C824,603.67 603,561.66 458.75,542.36 " fill="none" id="KPB_STATE_RESET_FINISHING-&gt;KPB_PREPARING" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="453.65,541.68,462.0317,546.8518,458.6048,542.3511,463.1054,538.9242,453.65,541.68" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="825" y="1005.8979">Reset done</text><!--MD5=[9d4ba76c83f4a3a4478849ff3904851e]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
[*] - -> KPB_DISABLED:  Start \nor\n [IPC] free \nmessage \nfrom either  state
KPB_DISABLED: Starting state of KPB - \nNo action has been taken yet
KPB_DISABLED- -> KPB_CREATED: [IPC] \nnew component
KPB_DISABLED-[#0000FF]-> KPB_DISABLED: [IPC] \nreset

KPB_CREATED : New KPB component has been created
KPB_CREATED - -> KPB_PREPARING: [IPC] \npcm params
KPB_CREATED -[#0000FF]-> KPB_CREATED : [IPC] \nreset

KPB_PREPARING: Prepare Key Phrase Buffer component.
KPB_PREPARING-> KPB_STATE_RUN: Success
KPB_PREPARING-> KPB_PREPARING: Failure
KPB_PREPARING-[#0000FF]-> KPB_PREPARING: [IPC] \nreset

KPB_STATE_RUN: KPB is prepared and ready.
KPB_STATE_RUN-[#0000FF]-> KPB_PREPARING: [IPC] \nreset
KPB_STATE_RUN- - -> KPB_STATE_INIT_DRAINING: [EVENT] \nkey phrase detected
KPB_STATE_RUN-> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_BUFFERING: Buffer incoming samples in the \ninternal history buffer
KPB_STATE_BUFFERING-> KPB_STATE_RUN: Done
KPB_STATE_BUFFERING-> KPB_STATE_INIT_DRAINING: Done
KPB_STATE_BUFFERING-> KPB_STATE_DRAINING: Done
KPB_STATE_BUFFERING-[#0000FF]-> KPB_STATE_RESETTING: [IPC] \nreset

KPB_STATE_INIT_DRAINING: KPB received detection event
KPB_STATE_INIT_DRAINING-[#0000FF]-> KPB_PREPARING: [IPC] \nreset
KPB_STATE_INIT_DRAINING- -> KPB_STATE_DRAINING: Draining task starts
KPB_STATE_INIT_DRAINING- -> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_DRAINING: KPB is draining internal history buffer \nto the client's buffer
KPB_STATE_DRAINING- ->KPB_STATE_HOST_COPY: Draining done
KPB_STATE_DRAINING-[#0000FF]-> KPB_STATE_RESETTING: [IPC] \nreset
KPB_STATE_DRAINING- -> KPB_STATE_BUFFERING: Start \nbuffering

KPB_STATE_RESETTING: KPB is preparing itself for the reset
KPB_STATE_RESETTING- ->KPB_STATE_RESET_FINISHING

KPB_STATE_RESET_FINISHING: KPB is finishing reset sequence
KPB_STATE_RESET_FINISHING->KPB_PREPARING: Reset done

KPB_STATE_HOST_COPY: KPB is copying real time \nstream into client's buffer
@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>