<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="530px" preserveAspectRatio="none" style="width:859px;height:530px;" version="1.1" viewBox="0 0 859 530" width="859px" zoomAndPan="magnify"><defs><filter height="300%" id="fgkeglx5rih3d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fgkeglx5rih3d)" height="301.3955" style="stroke: #A1A1CA; stroke-width: 2.0;" width="679.5" x="167.5" y="107.6289"/><rect fill="#FFFFFF" height="93.5317" style="stroke: none; stroke-width: 1.0;" width="679.5" x="167.5" y="190.915"/><rect fill="#FFFFFF" height="48.7773" style="stroke: none; stroke-width: 1.0;" width="679.5" x="167.5" y="284.4468"/><rect fill="#FFFFFF" height="58.7773" style="stroke: none; stroke-width: 1.0;" width="679.5" x="167.5" y="333.2241"/><rect fill="#FFFFFF" height="17.0229" style="stroke: none; stroke-width: 1.0;" width="679.5" x="167.5" y="392.0015"/><rect fill="#FFFFFF" filter="url(#fgkeglx5rih3d)" height="64.5317" style="stroke: #A1A1CA; stroke-width: 2.0;" width="568.5" x="167.5" y="423.0244"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="210.5" x2="210.5" y1="41.1201" y2="518.5562"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="616" x2="616" y1="41.1201" y2="518.5562"/><rect fill="#FFFFFF" filter="url(#fgkeglx5rih3d)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="63" x="177.5" y="3"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="184.5" y="26.0439">pipeline</text><rect fill="#FFFFFF" filter="url(#fgkeglx5rih3d)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="84" x="572" y="3"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="579" y="26.0439">component</text><polygon fill="#4A4A86" points="199,88.6289,209,92.6289,199,96.6289,203,92.6289" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="205" y1="92.6289" y2="92.6289"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="10" y="70.0181">comp_op_downstream(op_data,</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="10" y="87.7725">start, current, previous)</text><path d="M216,59.9973 L216,86.9973 L517,86.9973 L517,69.9973 L507,59.9973 L216,59.9973 " fill="#F6ED80" filter="url(#fgkeglx5rih3d)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M507,59.9973 L507,69.9973 L517,69.9973 L507,59.9973 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="222" y="79.8953">start, current, and previous are struct *comp_dev</text><path d="M167.5,107.6289 L228.5,107.6289 L228.5,116.6289 L218.5,126.6289 L167.5,126.6289 L167.5,107.6289 " fill="#EEEEEE" style="stroke: #A1A1CA; stroke-width: 1.0;"/><rect fill="none" height="301.3955" style="stroke: #A1A1CA; stroke-width: 2.0;" width="679.5" x="167.5" y="107.6289"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="182.5" y="123.5269">alt</text><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="243.5" y="122.2349">[op_data-&gt;op == COMP_OPS_PARAMS]</text><polygon fill="#4A4A86" points="604,147.1606,614,151.1606,604,155.1606,608,151.1606" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="610" y1="151.1606" y2="151.1606"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="218" y="146.3042">comp_install_params(current)</text><polygon fill="#4A4A86" points="604,178.915,614,182.915,604,186.915,608,182.915" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="610" y1="182.915" y2="182.915"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="218" y="178.0586">comp_params(current)</text><line style="stroke: #A1A1CA; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="167.5" x2="847" y1="191.915" y2="191.915"/><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="172.5" y="204.521">[COMP_OPS_CMD]</text><polygon fill="#4A4A86" points="604,227.6924,614,231.6924,604,235.6924,608,231.6924" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="610" y1="231.6924" y2="231.6924"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="218" y="226.8359">comp_cmd(current)</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="253" y1="263.4468" y2="263.4468"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="253" x2="253" y1="263.4468" y2="276.4468"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="212" x2="253" y1="276.4468" y2="276.4468"/><polygon fill="#4A4A86" points="222,272.4468,212,276.4468,222,280.4468,218,276.4468" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="218" y="258.5903">pipeline_cmd_update(current)</text><line style="stroke: #A1A1CA; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="167.5" x2="847" y1="285.4468" y2="285.4468"/><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="172.5" y="298.0527">[COMP_OPS_PREPARE]</text><polygon fill="#4A4A86" points="604,321.2241,614,325.2241,604,329.2241,608,325.2241" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="610" y1="325.2241" y2="325.2241"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="218" y="320.3677">comp_prepare(current)</text><line style="stroke: #A1A1CA; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="167.5" x2="847" y1="334.2241" y2="334.2241"/><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="172.5" y="346.8301">[COMP_OPS_RESET]</text><polygon fill="#4A4A86" points="604,375.0015,614,379.0015,604,383.0015,608,379.0015" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="610" y1="379.0015" y2="379.0015"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="218" y="374.145">comp_reset(current)</text><path d="M621,355.2471 L621,382.2471 L828,382.2471 L828,365.2471 L818,355.2471 L621,355.2471 " fill="#F6ED80" filter="url(#fgkeglx5rih3d)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M818,355.2471 L818,365.2471 L828,365.2471 L818,355.2471 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="627" y="375.145">error, handled by other API calls</text><line style="stroke: #A1A1CA; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="167.5" x2="847" y1="393.0015" y2="393.0015"/><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="172.5" y="405.6074">[COMP_OPS_BUFFER]</text><path d="M167.5,423.0244 L240.5,423.0244 L240.5,432.0244 L230.5,442.0244 L167.5,442.0244 L167.5,423.0244 " fill="#EEEEEE" style="stroke: #A1A1CA; stroke-width: 1.0;"/><rect fill="none" height="64.5317" style="stroke: #A1A1CA; stroke-width: 2.0;" width="568.5" x="167.5" y="423.0244"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="182.5" y="438.9224">loop</text><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="255.5" y="437.6304">[for each current's sink]</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="253" y1="466.5562" y2="466.5562"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="253" x2="253" y1="466.5562" y2="479.5562"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="212" x2="253" y1="479.5562" y2="479.5562"/><polygon fill="#4A4A86" points="222,475.5562,212,479.5562,222,483.5562,218,479.5562" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="391" x="218" y="461.6997">component_op_downstream(..., current = consumer @ sink/source)</text><path d="M621,449.3018 L621,476.3018 L717,476.3018 L717,459.3018 L707,449.3018 L621,449.3018 " fill="#F6ED80" filter="url(#fgkeglx5rih3d)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M707,449.3018 L707,459.3018 L717,459.3018 L707,449.3018 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="627" y="469.1997">recursive call</text><polygon fill="#4A4A86" points="14,496.5562,4,500.5562,14,504.5562,10,500.5562" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="210" y1="500.5562" y2="500.5562"/><!--MD5=[bb146c6d90f00e0df0284d6f68db5a84]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
participant "pipeline" as ppl
participant "component" as comp
-> ppl : comp_op_downstream(op_data,\nstart, current, previous)
   note right: start, current, and previous are struct *comp_dev
   alt op_data->op == COMP_OPS_PARAMS
      ppl -> comp : comp_install_params(current)
      ppl -> comp : comp_params(current)
   else COMP_OPS_CMD
      ppl -> comp : comp_cmd(current)
      ppl -> ppl : pipeline_cmd_update(current)
   else COMP_OPS_PREPARE
      ppl -> comp : comp_prepare(current)
   else COMP_OPS_RESET
      ppl -> comp : comp_reset(current)
   else COMP_OPS_BUFFER
      note right: error, handled by other API calls
   end
   loop for each current's sink
      ppl -> ppl : component_op_downstream(..., current = consumer @ sink/source)
      note right: recursive call
   end
<- - ppl

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>