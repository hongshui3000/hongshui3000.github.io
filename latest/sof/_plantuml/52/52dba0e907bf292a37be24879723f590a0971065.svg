<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1059px" preserveAspectRatio="none" style="width:953px;height:1059px;" version="1.1" viewBox="0 0 953 1059" width="953px" zoomAndPan="magnify"><defs><filter height="300%" id="f3swjaek2r1s4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="415.0352" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="187.749"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="546.407"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="357.7896" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="680.293"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="318.0352" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="720.0474"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="279.772" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="219.5034"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="272.2808" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="756.8018"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="58.7544" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="346" y="865.0649"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="251.2578"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="183.2632" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="302.0122"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="391.521"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="226.5264" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="788.5562"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="149.5176" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="828.3105"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="30" x2="30" y1="108.2402" y2="1047.0825"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="199.5" x2="199.5" y1="108.2402" y2="1047.0825"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="346" x2="346" y1="108.2402" y2="1047.0825"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="551.5" x2="551.5" y1="108.2402" y2="1047.0825"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="691" x2="691" y1="108.2402" y2="1047.0825"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="13" y="86.0439">Host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="8" y="105.1641">Driver</text><ellipse cx="30" cy="13" fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M30,21 L30,48 M17,29 L43,29 M30,48 L17,63 M30,48 L43,63 " fill="none" filter="url(#f3swjaek2r1s4)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="63" x="166.5" y="70.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="173.5" y="93.1641">pipeline</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="52.2402" style="stroke: #33335B; stroke-width: 1.5;" width="84" x="302" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="330.5" y="74.0439">host</text><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="309" y="93.1641">component</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="73" x="513.5" y="70.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="520.5" y="93.1641">hda_dma</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="72" x="653" y="70.1201"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="660" y="93.1641">HD/A HW</text><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="415.0352" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="187.749"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="546.407"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="357.7896" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="195" y="680.293"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="318.0352" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="200" y="720.0474"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="279.772" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="219.5034"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="272.2808" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="341" y="756.8018"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="58.7544" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="346" y="865.0649"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="14" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="251.2578"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="183.2632" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="302.0122"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="28" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="391.521"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="226.5264" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="547" y="788.5562"/><rect fill="#FFFFFF" filter="url(#f3swjaek2r1s4)" height="149.5176" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="552" y="828.3105"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="938" x="3" y="140.1174"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="140.1174" y2="140.1174"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="143.1174" y2="143.1174"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="25.7544" style="stroke: #D6D6DE; stroke-width: 1.0;" width="98" x="423" y="128.2402"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="429" y="147.1382">Start Trigger</text><polygon fill="#4A4A86" points="183,183.749,193,187.749,183,191.749,187,187.749" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="30" x2="189" y1="187.749" y2="187.749"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="37" y="182.8926">&lt;&lt;IPC&gt;&gt; trigger (START)</text><polygon fill="#4A4A86" points="329,215.5034,339,219.5034,329,223.5034,333,219.5034" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="205" x2="335" y1="219.5034" y2="219.5034"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="212" y="214.647">trigger (START)</text><polygon fill="#4A4A86" points="535,247.2578,545,251.2578,535,255.2578,539,251.2578" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="251.2578" y2="251.2578"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="358" y="246.4014">dma_start()</text><polygon fill="#4A4A86" points="362,261.2578,352,265.2578,362,269.2578,358,265.2578" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="265.2578" y2="265.2578"/><polygon fill="#4A4A86" points="535,298.0122,545,302.0122,535,306.0122,539,302.0122" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="302.0122" y2="302.0122"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="358" y="297.1558">copy(flags = PRELOAD)</text><path d="M562,278.2578 L562,305.2578 L752,305.2578 L752,288.2578 L742,278.2578 L562,278.2578 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M742,278.2578 L742,288.2578 L752,288.2578 L742,278.2578 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="568" y="298.1558">Do not expect Buffer Full yet.</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="599" y1="338.7666" y2="338.7666"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="599" x2="599" y1="338.7666" y2="351.7666"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="558" x2="599" y1="351.7666" y2="351.7666"/><polygon fill="#4A4A86" points="568,347.7666,558,351.7666,568,355.7666,564,351.7666" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="564" y="333.9102">state += PRELOAD</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="562" x2="604" y1="383.521" y2="383.521"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="383.521" y2="396.521"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="563" x2="604" y1="396.521" y2="396.521"/><polygon fill="#4A4A86" points="573,392.521,563,396.521,573,400.521,569,396.521" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="569" y="378.6646">preload()</text><path d="M631,366.2666 L631,393.2666 L802,393.2666 L802,376.2666 L792,366.2666 L631,366.2666 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M792,366.2666 L792,376.2666 L802,376.2666 L792,366.2666 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="637" y="386.1646">First non-blocking BF test</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="599" y1="458.2754" y2="458.2754"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="599" x2="599" y1="458.2754" y2="471.2754"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="558" x2="599" y1="471.2754" y2="471.2754"/><polygon fill="#4A4A86" points="568,467.2754,558,471.2754,568,475.2754,564,471.2754" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="564" y="453.4189">state += BF_WAIT</text><polygon fill="#4A4A86" points="362,481.2754,352,485.2754,362,489.2754,358,485.2754" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="485.2754" y2="485.2754"/><polygon fill="#4A4A86" points="216,495.2754,206,499.2754,216,503.2754,212,499.2754" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="210" x2="345" y1="499.2754" y2="499.2754"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="210" x2="252" y1="538.407" y2="538.407"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="252" x2="252" y1="538.407" y2="551.407"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="252" y1="551.407" y2="551.407"/><polygon fill="#4A4A86" points="221,547.407,211,551.407,221,555.407,217,551.407" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="217" y="533.5505">schedule_copy_idle()</text><path d="M351,512.2754 L351,557.2754 L582,557.2754 L582,522.2754 L572,512.2754 L351,512.2754 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M572,512.2754 L572,522.2754 L582,522.2754 L572,512.2754 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="357" y="532.1733">Scheduler got a ppl task (pre-loader)</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="361" y="549.9277">to run in idle</text><polygon fill="#4A4A86" points="41,598.7842,31,602.7842,41,606.7842,37,602.7842" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="199" y1="602.7842" y2="602.7842"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="938" x="3" y="632.6614"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="632.6614" y2="632.6614"/><line style="stroke: #D6D6DE; stroke-width: 0.5;" x1="3" x2="941" y1="635.6614" y2="635.6614"/><rect fill="#EEEEEE" filter="url(#f3swjaek2r1s4)" height="25.7544" style="stroke: #D6D6DE; stroke-width: 1.0;" width="72" x="436" y="620.7842"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="442" y="639.6821">Pre-load</text><polygon fill="#4A4A86" points="183,676.293,193,680.293,183,684.293,187,680.293" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="3" x2="189" y1="680.293" y2="680.293"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="10" y="675.4365">pipeline_task</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="205" x2="252" y1="707.0474" y2="707.0474"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="252" x2="252" y1="707.0474" y2="720.0474"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="211" x2="252" y1="720.0474" y2="720.0474"/><polygon fill="#4A4A86" points="221,716.0474,211,720.0474,221,724.0474,217,720.0474" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="217" y="702.1909">pipeline_copy</text><polygon fill="#4A4A86" points="329,752.8018,339,756.8018,329,760.8018,333,756.8018" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="210" x2="335" y1="756.8018" y2="756.8018"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="217" y="751.9453">copy()</text><polygon fill="#4A4A86" points="535,784.5562,545,788.5562,535,792.5562,539,788.5562" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="351" x2="541" y1="788.5562" y2="788.5562"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="358" y="783.6997">copy()</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="604" y1="815.3105" y2="815.3105"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="815.3105" y2="828.3105"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="563" x2="604" y1="828.3105" y2="828.3105"/><polygon fill="#4A4A86" points="573,824.3105,563,828.3105,573,832.3105,569,828.3105" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="569" y="810.4541">preload()</text><path d="M631,803.0562 L631,830.0562 L804,830.0562 L804,813.0562 L794,803.0562 L631,803.0562 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M794,803.0562 L794,813.0562 L804,813.0562 L794,803.0562 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="637" y="822.9541">Blocking BF wait this time</text><polygon fill="#4A4A86" points="367,861.0649,357,865.0649,367,869.0649,363,865.0649" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="361" x2="551" y1="865.0649" y2="865.0649"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="373" y="860.2085">callback() /for each period/</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="356" x2="398" y1="896.8193" y2="896.8193"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="398" x2="398" y1="896.8193" y2="909.8193"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="357" x2="398" y1="909.8193" y2="909.8193"/><polygon fill="#4A4A86" points="367,905.8193,357,909.8193,367,913.8193,363,909.8193" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="363" y="891.9629">comp_update_buffer_produce()</text><polygon fill="#4A4A86" points="540,919.8193,550,923.8193,540,927.8193,544,923.8193" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="351" x2="546" y1="923.8193" y2="923.8193"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="562" x2="604" y1="976.8281" y2="976.8281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="604" x2="604" y1="976.8281" y2="989.8281"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="557" x2="604" y1="989.8281" y2="989.8281"/><polygon fill="#4A4A86" points="567,985.8281,557,989.8281,567,993.8281,563,989.8281" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="569" y="971.9717">clear state flags</text><path d="M673,936.8193 L673,999.8193 L917,999.8193 L917,946.8193 L907,936.8193 L673,936.8193 " fill="#F6ED80" filter="url(#f3swjaek2r1s4)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M907,936.8193 L907,946.8193 L917,946.8193 L907,936.8193 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="679" y="956.7173">Switching to normal on demand mode.</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="679" y="974.4717">Rptr (FPI) advanced on the next copy()</text><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="679" y="992.2261">Once the first period is processed.</text><polygon fill="#4A4A86" points="362,1011.0825,352,1015.0825,362,1019.0825,358,1015.0825" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="551" y1="1015.0825" y2="1015.0825"/><polygon fill="#4A4A86" points="221,1025.0825,211,1029.0825,221,1033.0825,217,1029.0825" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="215" x2="345" y1="1029.0825" y2="1029.0825"/><!--MD5=[4d8c098a646494599511d711deb53805]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
actor drv as "Host\nDriver"
participant ppl as "pipeline"
participant host as "host\ncomponent"
participant hda_dma
participant hda_hw as "HD/A HW"

== Start Trigger ==

drv -> ppl : <<IPC>> trigger (START)
   activate ppl

   ppl -> host : trigger (START)
      activate host

      host -> hda_dma : dma_start()
         activate hda_dma
      host <- - hda_dma
      deactivate hda_dma

      host -> hda_dma : copy(flags = PRELOAD)
         activate hda_dma
         note right: Do not expect Buffer Full yet.
         hda_dma -> hda_dma : state += PRELOAD
         hda_dma -> hda_dma : preload()
            activate hda_dma
            note right : First non-blocking BF test
         deactivate hda_dma
         hda_dma -> hda_dma : state += BF_WAIT
      host <- - hda_dma
      deactivate hda_dma
   ppl <- - host
   deactivate host

   ppl -> ppl : schedule_copy_idle()
      activate ppl
      note right: Scheduler got a ppl task (pre-loader)\n to run in idle
   deactivate ppl
drv <- - ppl
deactivate ppl

== Pre-load ==

-> ppl : pipeline_task
   activate ppl
   ppl -> ppl : pipeline_copy
      activate ppl
      ppl -> host : copy()
         activate host
         host -> hda_dma : copy()
            activate hda_dma
            hda_dma -> hda_dma : preload()
               activate hda_dma
               note right : Blocking BF wait this time
               host <- hda_dma : callback() /for each period/
                  activate host
                  host -> host : comp_update_buffer_produce()
               host - -> hda_dma
               deactivate host
               hda_dma -> hda_dma : clear state flags
note right: Switching to normal on demand mode.\nRptr (FPI) advanced on the next copy()\nOnce the first period is processed.
            deactivate hda_dma
         host <- - hda_dma
         deactivate hda_dma
      ppl <- - host
      deactivate host

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>