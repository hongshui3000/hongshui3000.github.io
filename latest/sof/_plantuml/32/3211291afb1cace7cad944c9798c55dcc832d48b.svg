<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="239.0345px" preserveAspectRatio="none" style="width:797px;height:239px;" version="1.1" viewBox="0 0 797 239" width="797.0037px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ifalq3qdur3a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.3316687473990845"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.663337494798169" dy="2.663337494798169" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="72.9147" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="177.1119" y="53.1832"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="67.4245" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="359.8835" y="147.2411"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="39.1207" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="565.6263" y="77.6555"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="21.1432" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="565.6263" y="168.3842"/><line style="stroke: #F05772; stroke-width: 0.6658343736995422; stroke-dasharray: 5.0,5.0;" x1="81.2318" x2="81.2318" y1="27.3792" y2="231.3114"/><line style="stroke: #F05772; stroke-width: 0.6658343736995422; stroke-dasharray: 5.0,5.0;" x1="180.4411" x2="180.4411" y1="27.3792" y2="231.3114"/><line style="stroke: #F05772; stroke-width: 0.6658343736995422; stroke-dasharray: 5.0,5.0;" x1="240.3662" x2="240.3662" y1="27.3792" y2="231.3114"/><line style="stroke: #F05772; stroke-width: 0.6658343736995422; stroke-dasharray: 5.0,5.0;" x1="362.8797" x2="362.8797" y1="27.3792" y2="231.3114"/><line style="stroke: #F05772; stroke-width: 0.6658343736995422; stroke-dasharray: 5.0,5.0;" x1="568.6226" x2="568.6226" y1="27.3792" y2="231.3114"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="22.0525" style="stroke: #33335B; stroke-width: 0.9987515605493134;" width="34.6234" x="62.5884" y="1.9975"/><text fill="#33335B" font-family="sans-serif" font-size="9.3217" lengthAdjust="spacingAndGlyphs" textLength="25.3017" x="67.2493" y="17.341">Driver</text><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="22.0525" style="stroke: #33335B; stroke-width: 0.9987515605493134;" width="21.3067" x="168.4561" y="1.9975"/><text fill="#33335B" font-family="sans-serif" font-size="9.3217" lengthAdjust="spacingAndGlyphs" textLength="11.985" x="173.1169" y="17.341">ipc</text><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="22.0525" style="stroke: #33335B; stroke-width: 0.9987515605493134;" width="80.566" x="199.0845" y="1.9975"/><text fill="#33335B" font-family="sans-serif" font-size="9.3217" lengthAdjust="spacingAndGlyphs" textLength="71.2443" x="203.7453" y="17.341">master-core-task</text><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="22.0525" style="stroke: #33335B; stroke-width: 0.9987515605493134;" width="43.2792" x="340.2414" y="1.9975"/><text fill="#33335B" font-family="sans-serif" font-size="9.3217" lengthAdjust="spacingAndGlyphs" textLength="33.9576" x="344.9022" y="17.341">platform</text><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="22.0525" style="stroke: #33335B; stroke-width: 0.9987515605493134;" width="56.5959" x="539.3258" y="1.9975"/><text fill="#33335B" font-family="sans-serif" font-size="9.3217" lengthAdjust="spacingAndGlyphs" textLength="47.2742" x="543.9867" y="17.341">pm-runtime</text><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="72.9147" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="177.1119" y="53.1832"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="67.4245" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="359.8835" y="147.2411"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="39.1207" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="565.6263" y="77.6555"/><rect fill="#FFFFFF" filter="url(#f1ifalq3qdur3a)" height="21.1432" style="stroke: #F05772; stroke-width: 0.6658343736995422;" width="6.6583" x="565.6263" y="168.3842"/><polygon fill="#4A4A86" points="169.1219,50.5199,175.7803,53.1832,169.1219,55.8465,171.7853,53.1832" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="81.2318" x2="173.1169" y1="53.1832" y2="53.1832"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="83.2293" x="85.8926" y="49.9496">PM_GATE (PPG = 0)</text><path d="M5.3267,37.3667 L5.3267,55.3442 L75.2393,55.3442 L75.2393,44.025 L68.5809,37.3667 L5.3267,37.3667 " fill="#F6ED80" filter="url(#f1ifalq3qdur3a)" style="stroke: #D6D6DE; stroke-width: 0.6658343736995422;"/><path d="M68.5809,37.3667 L68.5809,44.025 L75.2393,44.025 L68.5809,37.3667 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 0.6658343736995422;"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="55.9301" x="9.3217" y="50.6154">Entering idle...</text><polygon fill="#4A4A86" points="557.6363,74.9922,564.2946,77.6555,557.6363,80.3189,560.2996,77.6555" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="183.7703" x2="561.6313" y1="77.6555" y2="77.6555"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179.1094" x="188.4311" y="74.4219">pm_runtime_enable(PM_RUNTIME_DSP, 0)</text><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="572.2846" x2="600.2497" y1="98.7987" y2="98.7987"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="600.2497" x2="600.2497" y1="98.7987" y2="107.4545"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="572.9505" x2="600.2497" y1="107.4545" y2="107.4545"/><polygon fill="#4A4A86" points="579.6088,104.7912,572.9505,107.4545,579.6088,110.1179,576.9455,107.4545" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="31.2942" x="576.9455" y="95.5651">ref_cnt--</text><path d="M615.8968,87.3101 L615.8968,105.2877 L789.0137,105.2877 L789.0137,93.9685 L782.3554,87.3101 L615.8968,87.3101 " fill="#F6ED80" filter="url(#f1ifalq3qdur3a)" style="stroke: #D6D6DE; stroke-width: 0.6658343736995422;"/><path d="M782.3554,87.3101 L782.3554,93.9685 L789.0137,93.9685 L782.3554,87.3101 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 0.6658343736995422;"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="159.1344" x="619.8918" y="100.5589">1 -&gt; 0 (if there was no other disable calls)</text><polygon fill="#4A4A86" points="191.0945,114.1129,184.4361,116.7762,191.0945,119.4396,188.4311,116.7762" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422; stroke-dasharray: 2.0,2.0;" x1="187.0995" x2="568.2896" y1="116.7762" y2="116.7762"/><polygon fill="#4A4A86" points="88.556,123.4346,81.8976,126.0979,88.556,128.7612,85.8926,126.0979" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422; stroke-dasharray: 2.0,2.0;" x1="84.561" x2="179.7753" y1="126.0979" y2="126.0979"/><polygon fill="#4A4A86" points="351.8935,144.5777,358.5518,147.2411,351.8935,149.9044,354.5568,147.2411" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="240.6991" x2="355.8885" y1="147.2411" y2="147.2411"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="106.5335" x="245.36" y="144.0075">platform_wait_for_interrupt()</text><polygon fill="#4A4A86" points="557.6363,165.7209,564.2946,168.3842,557.6363,171.0476,560.2996,168.3842" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="366.5418" x2="561.6313" y1="168.3842" y2="168.3842"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186.4336" x="371.2027" y="165.1507">pm_runtime_is_active(PM_RUNTIME_DSP, 0)</text><polygon fill="#4A4A86" points="373.866,186.8641,367.2077,189.5274,373.866,192.1908,371.2027,189.5274" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422; stroke-dasharray: 2.0,2.0;" x1="369.871" x2="568.2896" y1="189.5274" y2="189.5274"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="17.9775" x="377.861" y="186.2938">false</text><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="366.5418" x2="394.5069" y1="213.9998" y2="213.9998"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="394.5069" x2="394.5069" y1="213.9998" y2="222.6556"/><line style="stroke: #4A4A86; stroke-width: 0.6658343736995422;" x1="363.2127" x2="394.5069" y1="222.6556" y2="222.6556"/><polygon fill="#4A4A86" points="369.871,219.9923,363.2127,222.6556,369.871,225.3189,367.2077,222.6556" style="stroke: #4A4A86; stroke-width: 0.6658343736995422;"/><text fill="#33335B" font-family="sans-serif" font-size="8.6558" lengthAdjust="spacingAndGlyphs" textLength="89.2218" x="371.2027" y="210.7662">d?-idle state if available</text><!--MD5=[0357aca0df1f1f2785203de329990748]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
scale max 800 width

participant drv as "Driver"
participant ipc
participant mct as "master-core-task"
participant platform
participant pm_rt as "pm-runtime"

drv -> ipc : PM_GATE (PPG = 0)
note left: Entering idle...
   activate ipc
   ipc -> pm_rt : <b>pm_runtime_enable(PM_RUNTIME_DSP, 0)</b>
      activate pm_rt
      pm_rt -> pm_rt : ref_cnt- -
         note right: 1 -> 0 (if there was no other disable calls)
   ipc <- - pm_rt
   deactivate pm_rt
drv <- - ipc
deactivate ipc

mct -> platform : <i>platform_wait_for_interrupt()</i>
   activate platform
   platform -> pm_rt : <b>pm_runtime_is_active(PM_RUNTIME_DSP, 0)</b>
      activate pm_rt
   platform <- - pm_rt : false
   deactivate pm_rt
   platform -> platform : d?-idle state if available
   deactivate platform

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>