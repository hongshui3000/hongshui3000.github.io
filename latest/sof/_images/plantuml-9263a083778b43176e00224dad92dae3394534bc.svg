<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="415px" preserveAspectRatio="none" style="width:553px;height:415px;" version="1.1" viewBox="0 0 553 415" width="553px" zoomAndPan="magnify"><defs><filter height="300%" id="f11toaidhw738m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[09acfa745e828315b550bb1a630bf02b]
class lib--><rect fill="#FFFFFF" filter="url(#f11toaidhw738m)" height="70.0459" id="lib" style="stroke: #33335B; stroke-width: 1.5;" width="165" x="377" y="83"/><ellipse cx="448.75" cy="99" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M447.3281,104.3594 Q445.4688,104.3594 444.375,102.9688 Q443.2813,101.5781 443.2813,98.5938 Q443.2813,96.0625 444.4453,94.4063 Q445.6094,92.75 447.5938,92.75 Q449.0625,92.75 449.5313,92.875 Q450,93.0781 450,93.0781 Q450,93.0781 450,93.0078 Q450,92.9375 450.6094,92.0156 L451.6563,95.6719 L450.3281,96.0781 Q449.8594,94.5313 449.1953,93.8672 Q448.5313,93.2031 447.4688,93.2031 Q447.0781,93.2031 446.3125,94.7344 Q445.5469,96.2656 445.5469,98.5156 Q445.5469,100.9844 446.2109,102.375 Q446.875,103.7656 447.4063,103.7656 Q448.4688,103.7656 449.2266,103 Q449.9844,102.2344 450.3281,100.5781 L451.6563,101.1719 Q451.3281,102.5781 450.4297,103.4688 Q449.5313,104.3594 447.3281,104.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="13" x="469.25" y="104.5576">lib</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="378" x2="541" y1="115" y2="115"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="383" y="131.606">dma_get(dmac_id) : struct dma*</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="383" y="146.6289">dma_put(struct dma*)</text><!--MD5=[2a19531738c4b67fe1c87b097f6c6198]
class dma_ops--><rect fill="#FFFFFF" filter="url(#f11toaidhw738m)" height="220.2754" id="dma_ops" style="stroke: #33335B; stroke-width: 1.5;" width="117" x="6" y="8"/><ellipse cx="35.4" cy="24" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M33.9781,29.3594 Q32.1188,29.3594 31.025,27.9688 Q29.9313,26.5781 29.9313,23.5938 Q29.9313,21.0625 31.0953,19.4063 Q32.2594,17.75 34.2438,17.75 Q35.7125,17.75 36.1813,17.875 Q36.65,18.0781 36.65,18.0781 Q36.65,18.0781 36.65,18.0078 Q36.65,17.9375 37.2594,17.0156 L38.3063,20.6719 L36.9781,21.0781 Q36.5094,19.5313 35.8453,18.8672 Q35.1813,18.2031 34.1188,18.2031 Q33.7281,18.2031 32.9625,19.7344 Q32.1969,21.2656 32.1969,23.5156 Q32.1969,25.9844 32.8609,27.375 Q33.525,28.7656 34.0563,28.7656 Q35.1188,28.7656 35.8766,28 Q36.6344,27.2344 36.9781,25.5781 L38.3063,26.1719 Q37.9781,27.5781 37.0797,28.4688 Q36.1813,29.3594 33.9781,29.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="52.6" y="29.5576">dma_ops</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="7" x2="122" y1="40" y2="40"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="12" y="56.606">channel_get()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="12" y="71.6289">channel_put()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="30" x="12" y="86.6519">start()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="12" y="101.6748">stop()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="12" y="116.6978">pause()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="12" y="131.7207">release()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="12" y="146.7437">status()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="12" y="161.7666">set_config()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="12" y="176.7896">set_cb()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="12" y="191.8125">pm_context_restore()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="12" y="206.8354">probe()</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="12" y="221.8584">remove()</text><!--MD5=[a432fd5df7428633a8c69c6aec8c3f35]
class dma_plat_data--><rect fill="#FFFFFF" filter="url(#f11toaidhw738m)" height="115.1147" id="dma_plat_data" style="stroke: #33335B; stroke-width: 1.5;" width="115" x="168" y="289"/><ellipse cx="183" cy="305" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M181.5781,310.3594 Q179.7188,310.3594 178.625,308.9688 Q177.5313,307.5781 177.5313,304.5938 Q177.5313,302.0625 178.6953,300.4063 Q179.8594,298.75 181.8438,298.75 Q183.3125,298.75 183.7813,298.875 Q184.25,299.0781 184.25,299.0781 Q184.25,299.0781 184.25,299.0078 Q184.25,298.9375 184.8594,298.0156 L185.9063,301.6719 L184.5781,302.0781 Q184.1094,300.5313 183.4453,299.8672 Q182.7813,299.2031 181.7188,299.2031 Q181.3281,299.2031 180.5625,300.7344 Q179.7969,302.2656 179.7969,304.5156 Q179.7969,306.9844 180.4609,308.375 Q181.125,309.7656 181.6563,309.7656 Q182.7188,309.7656 183.4766,309 Q184.2344,308.2344 184.5781,306.5781 L185.9063,307.1719 Q185.5781,308.5781 184.6797,309.4688 Q183.7813,310.3594 181.5781,310.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="197" y="310.5576">dma_plat_data</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="169" x2="282" y1="321" y2="321"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="174" y="337.606">id : uint32_t</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="174" y="352.6289">base : uint32_t</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="174" y="367.6519">channels : uint32_t</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="174" y="382.6748">irq : uint32_t</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="174" y="397.6978">drv_plat_data : void *</text><!--MD5=[1dc6b159e49bcfc9a9c6c2ca2ed8028d]
class s_dma--><rect fill="#FFFFFF" filter="url(#f11toaidhw738m)" height="100.0918" id="s_dma" style="stroke: #33335B; stroke-width: 1.5;" width="135" x="158" y="68"/><ellipse cx="193.25" cy="84" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M191.8281,89.3594 Q189.9688,89.3594 188.875,87.9688 Q187.7813,86.5781 187.7813,83.5938 Q187.7813,81.0625 188.9453,79.4063 Q190.1094,77.75 192.0938,77.75 Q193.5625,77.75 194.0313,77.875 Q194.5,78.0781 194.5,78.0781 Q194.5,78.0781 194.5,78.0078 Q194.5,77.9375 195.1094,77.0156 L196.1563,80.6719 L194.8281,81.0781 Q194.3594,79.5313 193.6953,78.8672 Q193.0313,78.2031 191.9688,78.2031 Q191.5781,78.2031 190.8125,79.7344 Q190.0469,81.2656 190.0469,83.5156 Q190.0469,85.9844 190.7109,87.375 Q191.375,88.7656 191.9063,88.7656 Q192.9688,88.7656 193.7266,88 Q194.4844,87.2344 194.8281,85.5781 L196.1563,86.1719 Q195.8281,87.5781 194.9297,88.4688 Q194.0313,89.3594 191.8281,89.3594 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="211.75" y="89.5576">struct dma</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="159" x2="292" y1="100" y2="100"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="164" y="116.606">plat_data : dma_plat_data</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="164" y="131.6289">lock : spinlock_t</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="164" y="146.6519">ops : const dma_ops *</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="164" y="161.6748">private : void *</text><!--MD5=[79b030a94a629842d2e0dacbe68a5ad7]
link dma_ops to s_dma--><path d="M123.3,118 C134.75,118 146.19,118 157.63,118 " fill="none" id="dma_ops-s_dma" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[4d140f7abc58be0a6c967c6f58ed7373]
link s_dma to dma_plat_data--><path d="M225.5,168.15 C225.5,203.67 225.5,251.73 225.5,288.86 " fill="none" id="s_dma-dma_plat_data" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[a2a6b5a5a48041a8a9884b47500737ab]
reverse link s_dma to lib--><path d="M298.42,118 C323.21,118 351.09,118 376.6,118 " fill="none" id="s_dma&lt;-lib" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="293.18,118,302.18,122,298.18,118,302.18,114,293.18,118" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="311.5" y="111.8979">provides</text><!--MD5=[a1d3f8046f062ae1bc996082d41032de]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
class lib {
   dma_get(dmac_id) : struct dma*
   dma_put(struct dma*)
}
hide lib attributes

class dma_ops {
   channel_get()
   channel_put()
   start()
   stop()
   pause()
   release()
   status()
   set_config()
   set_cb()
   pm_context_restore()
   probe()
   remove()
}
hide dma_ops attributes

class dma_plat_data {
   id : uint32_t
   base : uint32_t
   channels : uint32_t
   irq : uint32_t
   drv_plat_data : void *
}
hide dma_plat_data methods

class "struct dma" as s_dma {
   plat_data : dma_plat_data
   lock : spinlock_t
   ops : const dma_ops *
   private : void *
}
hide s_dma methods

dma_ops - s_dma
s_dma - - dma_plat_data
s_dma <- lib : provides

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>