<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="788px" preserveAspectRatio="none" style="width:807px;height:788px;" version="1.1" viewBox="0 0 807 788" width="807px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qn9dopi7m1zr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="667.9678" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="35" y="99.1201"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="667.9678" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="484" y="99.1201"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="82.8745" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="642" y="455.6641"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="122.2632" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="642" y="628.8247"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="68" x="611" y="421.9097"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="618" y="444.9536">DSP FW</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="205.5493" style="stroke: #A1A1CA; stroke-width: 2.0;" width="783" x="13" y="553.5386"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="40" x2="40" y1="89.1201" y2="776.0879"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="187" x2="187" y1="89.1201" y2="776.0879"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="296" x2="296" y1="89.1201" y2="776.0879"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="393" x2="393" y1="89.1201" y2="776.0879"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="489" x2="489" y1="89.1201" y2="776.0879"/><line style="stroke: #F05772; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="647" x2="647" y1="455.9697" y2="776.0879"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="23" y="86.0439">Host</text><ellipse cx="40" cy="13" fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" rx="8" ry="8" style="stroke: #33335B; stroke-width: 2.0;"/><path d="M40,21 L40,48 M27,29 L53,29 M40,48 L27,63 M40,48 L53,63 " fill="none" filter="url(#f1qn9dopi7m1zr)" style="stroke: #33335B; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="110" x="130" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="137" y="74.0439">CodeLoadDMA</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="81" x="254" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="261" y="74.0439">MemWnd0</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="85" x="349" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="356" y="74.0439">DSP Core0</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="78" x="448" y="51"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="455" y="74.0439">DSP ROM</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="667.9678" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="35" y="99.1201"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="667.9678" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="484" y="99.1201"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="82.8745" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="642" y="455.6641"/><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="122.2632" style="stroke: #F05772; stroke-width: 1.0;" width="10" x="642" y="628.8247"/><polygon fill="#4A4A86" points="175,118.8745,185,122.8745,175,126.8745,179,122.8745" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="45" x2="181" y1="122.8745" y2="122.8745"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="52" y="118.0181">init_host_side()</text><polygon fill="#4A4A86" points="198,155.6289,188,159.6289,198,163.6289,194,159.6289" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="192" x2="483" y1="159.6289" y2="159.6289"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="204" y="154.7725">init_dsp_side()</text><path d="M499,135.8745 L499,162.8745 L649,162.8745 L649,145.8745 L639,135.8745 L499,135.8745 " fill="#F6ED80" filter="url(#f1qn9dopi7m1zr)" style="stroke: #D6D6DE; stroke-width: 1.0;"/><path d="M639,135.8745 L639,145.8745 L649,145.8745 L639,135.8745 " fill="#F6ED80" style="stroke: #D6D6DE; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="505" y="155.7725">Unified cAVS1.5+ flow</text><polygon fill="#4A4A86" points="284.5,192.3833,294.5,196.3833,284.5,200.3833,288.5,196.3833" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="45" x2="290.5" y1="196.3833" y2="196.3833"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="52" y="191.5269">wait for (FSR_ROM_INIT_DONE)</text><polygon fill="#4A4A86" points="307.5,224.1377,297.5,228.1377,307.5,232.1377,303.5,228.1377" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="301.5" x2="483" y1="228.1377" y2="228.1377"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="313.5" y="223.2813">FSR_ROM_INIT_DONE</text><polygon fill="#4A4A86" points="56,238.1377,46,242.1377,56,246.1377,52,242.1377" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="50" x2="295.5" y1="242.1377" y2="242.1377"/><polygon fill="#4A4A86" points="175,269.8921,185,273.8921,175,277.8921,179,273.8921" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="45" x2="181" y1="273.8921" y2="273.8921"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="52" y="269.0356">write(base fw binary)</text><polygon fill="#4A4A86" points="198,301.6465,188,305.6465,198,309.6465,194,305.6465" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="192" x2="483" y1="305.6465" y2="305.6465"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="204" y="300.79">read() : base fw manifest</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="494" x2="536" y1="337.4009" y2="337.4009"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="536" x2="536" y1="337.4009" y2="350.4009"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="495" x2="536" y1="350.4009" y2="350.4009"/><polygon fill="#4A4A86" points="505,346.4009,495,350.4009,505,354.4009,501,350.4009" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="501" y="332.5444">veirfy(base fw manifest)</text><polygon fill="#4A4A86" points="198,378.1553,188,382.1553,198,386.1553,194,382.1553" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="192" x2="483" y1="382.1553" y2="382.1553"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="204" y="377.2988">read() : base fw code</text><polygon fill="#4A4A86" points="307.5,409.9097,297.5,413.9097,307.5,417.9097,303.5,413.9097" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="301.5" x2="483" y1="413.9097" y2="413.9097"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="313.5" y="409.0532">FSR_ROM_FW_ENTERED</text><polygon fill="#4A4A86" points="599,441.6641,609,445.6641,599,449.6641,603,445.6641" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="494" x2="605" y1="445.6641" y2="445.6641"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="501" y="440.8076">start()</text><rect fill="#FFFFFF" filter="url(#f1qn9dopi7m1zr)" height="33.1201" style="stroke: #33335B; stroke-width: 1.5;" width="68" x="611" y="421.9097"/><text fill="#33335B" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="618" y="444.9536">DSP FW</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="652" x2="694" y1="493.7842" y2="493.7842"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="694" x2="694" y1="493.7842" y2="506.7842"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="653" x2="694" y1="506.7842" y2="506.7842"/><polygon fill="#4A4A86" points="663,502.7842,653,506.7842,663,510.7842,659,506.7842" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="659" y="488.9277">initialization()</text><polygon fill="#4A4A86" points="56,534.5386,46,538.5386,56,542.5386,52,538.5386" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="50" x2="646" y1="538.5386" y2="538.5386"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="62" y="533.6821">&lt;&lt;IPC Notification&gt;&gt; FW Ready</text><path d="M13,553.5386 L86,553.5386 L86,562.5386 L76,572.5386 L13,572.5386 L13,553.5386 " fill="#EEEEEE" style="stroke: #A1A1CA; stroke-width: 1.0;"/><rect fill="none" height="205.5493" style="stroke: #A1A1CA; stroke-width: 2.0;" width="783" x="13" y="553.5386"/><text fill="#33335B" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="28" y="569.4365">loop</text><text fill="#33335B" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="101" y="568.1445">[libraries loading]</text><polygon fill="#4A4A86" points="175,593.0703,185,597.0703,175,601.0703,179,597.0703" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="45" x2="181" y1="597.0703" y2="597.0703"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="52" y="592.2139">write(library binary)</text><polygon fill="#4A4A86" points="630,624.8247,640,628.8247,630,632.8247,634,628.8247" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="45" x2="636" y1="628.8247" y2="628.8247"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="52" y="623.9683">&lt;&lt;IPC&gt;&gt; Load Library</text><polygon fill="#4A4A86" points="198,656.5791,188,660.5791,198,664.5791,194,660.5791" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="192" x2="641" y1="660.5791" y2="660.5791"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="204" y="655.7227">read() : library manifest</text><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="652" x2="694" y1="692.3335" y2="692.3335"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="694" x2="694" y1="692.3335" y2="705.3335"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="653" x2="694" y1="705.3335" y2="705.3335"/><polygon fill="#4A4A86" points="663,701.3335,653,705.3335,663,709.3335,659,705.3335" style="stroke: #4A4A86; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="659" y="687.4771">verify(library manifest)</text><polygon fill="#4A4A86" points="198,733.0879,188,737.0879,198,741.0879,194,737.0879" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0;" x1="192" x2="641" y1="737.0879" y2="737.0879"/><text fill="#33335B" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="204" y="732.2314">read() : library code</text><polygon fill="#4A4A86" points="56,747.0879,46,751.0879,56,755.0879,52,751.0879" style="stroke: #4A4A86; stroke-width: 1.0;"/><line style="stroke: #4A4A86; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="50" x2="646" y1="751.0879" y2="751.0879"/><!--MD5=[a56cc8484bc3e41ef2f9109f67171dc3]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}
actor host as "Host"
participant cldma as "CodeLoadDMA"
participant mw0 as "MemWnd0"
participant core0 as "DSP Core0"
participant rom as "DSP ROM"
participant fw as "DSP FW"

activate rom
activate host
host -> cldma : init_host_side()

rom -> cldma : init_dsp_side()
note right: Unified cAVS1.5+ flow

host -> mw0 : wait for (FSR_ROM_INIT_DONE)
  mw0 <- rom : FSR_ROM_INIT_DONE
host <- - mw0

host -> cldma : write(base fw binary)
  cldma <- rom : read() : base fw manifest
  rom -> rom : veirfy(base fw manifest)
  cldma <- rom : read() : base fw code
  mw0 <- rom : FSR_ROM_FW_ENTERED

  create fw
  rom -> fw : start()
    activate fw
    fw -> fw : initialization()
    host <- fw : <<IPC Notification>> FW Ready
    deactivate fw

loop libraries loading
  host -> cldma : write(library binary)
  host -> fw : <<IPC>> Load Library
    activate fw
    cldma <- fw : read() : library manifest
    fw -> fw : verify(library manifest)
    cldma <- fw : read() : library code
    host <- - fw
    deactivate fw
end loop

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>