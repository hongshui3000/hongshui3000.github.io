<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="509px" preserveAspectRatio="none" style="width:319px;height:509px;" version="1.1" viewBox="0 0 319 509" width="319px" zoomAndPan="magnify"><defs><filter height="300%" id="f705jy69x5ca2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#33335B" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="227" x="57.5" y="20.6279">Extended manifest build flow</text><!--MD5=[da352c871de30ea3af4336602ad2097c]
cluster rimage--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="192" style="stroke: #000000; stroke-width: 1.5;" width="286" x="22" y="158.583"/><text fill="#33335B" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="141" y="176.627">rimage</text><!--MD5=[a081bb95bf989a9f340eb378b1ba9d90]
class ext_man_write--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="138.1377" id="ext_man_write" style="stroke: #33335B; stroke-width: 1.5;" width="253" x="38.5" y="196.583"/><ellipse cx="120.75" cy="212.583" fill="#6FCCDD" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M119.3281,217.9424 Q117.4688,217.9424 116.375,216.5518 Q115.2813,215.1611 115.2813,212.1768 Q115.2813,209.6455 116.4453,207.9893 Q117.6094,206.333 119.5938,206.333 Q121.0625,206.333 121.5313,206.458 Q122,206.6611 122,206.6611 Q122,206.6611 122,206.5908 Q122,206.5205 122.6094,205.5986 L123.6563,209.2549 L122.3281,209.6611 Q121.8594,208.1143 121.1953,207.4502 Q120.5313,206.7861 119.4688,206.7861 Q119.0781,206.7861 118.3125,208.3174 Q117.5469,209.8486 117.5469,212.0986 Q117.5469,214.5674 118.2109,215.958 Q118.875,217.3486 119.4063,217.3486 Q120.4688,217.3486 121.2266,216.583 Q121.9844,215.8174 122.3281,214.1611 L123.6563,214.7549 Q123.3281,216.1611 122.4297,217.0518 Q121.5313,217.9424 119.3281,217.9424 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="141.25" y="218.1406">ext_man_write</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="290.5" y1="228.583" y2="228.583"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="44.5" y="245.189">1. Create .ri.xman file</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="44.5" y="260.2119">2. Find elf file with .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="44.5" y="275.2349">3. Read .fw_metadata section</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="44.5" y="290.2578">4. Build ext_man_header</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="241" x="44.5" y="305.2808">5. Validate sum of elements size with section size</text><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="44.5" y="320.3037">6. Save output to .ri.xman file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="39.5" x2="290.5" y1="326.7207" y2="326.7207"/><!--MD5=[5c970644e5b7143556414cadba97c378]
class firmware_elf_file--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="104.0918" id="firmware_elf_file" style="stroke: #33335B; stroke-width: 1.5;" width="127" x="101.5" y="32.583"/><ellipse cx="118.3" cy="48.583" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M118.8938,53.4111 L118.8938,53.8174 L114.7063,53.8174 L114.7063,53.4111 L115.1594,53.4111 Q115.5031,53.4111 115.6359,53.2783 Q115.7688,53.1455 115.7688,52.8799 L115.7688,43.3955 Q115.7688,43.1299 115.6359,42.9971 Q115.5031,42.8643 115.1594,42.8643 L114.7688,42.8643 L114.7688,42.458 L122.675,42.458 L123.4719,44.8486 L122.3156,45.3486 Q121.6125,43.9268 120.8781,43.3955 Q120.1438,42.8643 119.2844,42.8643 L117.425,42.8643 Q117.425,42.8643 117.5578,42.9971 Q117.6906,43.1299 117.6906,43.3955 L117.6906,47.6455 L119.0188,47.6455 Q119.675,47.6455 119.9797,47.3408 Q120.2844,47.0361 120.2844,46.3799 L120.2844,46.0518 L121.675,46.0518 L121.675,49.8955 L120.2844,49.8955 L120.2844,49.6299 Q120.2844,48.833 119.9797,48.4346 Q119.675,48.0361 119.0188,48.0361 L117.8313,48.0361 L117.8313,52.8799 Q117.8313,53.1455 117.9953,53.2783 Q118.1594,53.4111 118.1594,53.4111 L118.8938,53.4111 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="132.7" y="54.1406">firmware_elf_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="102.5" x2="227.5" y1="64.583" y2="64.583"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="107.5" y="81.189">suffix:</text><ellipse cx="112.5" cy="109.6289" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="121.5" y="115.2349">FW metadata section</text><ellipse cx="112.5" cy="124.6519" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="121.5" y="130.2578">other sections</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="102.5" x2="146.5" y1="95.1174" y2="95.1174"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="146.5" y="99.7119">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="183.5" x2="227.5" y1="95.1174" y2="95.1174"/><!--MD5=[d9fc180130ed2022e7c2981ad5d1b604]
class ext_man_file--><rect fill="#FFFFFF" filter="url(#f705jy69x5ca2)" height="104.0918" id="ext_man_file" style="stroke: #33335B; stroke-width: 1.5;" width="170" x="80" y="394.583"/><ellipse cx="125.75" cy="410.583" fill="#DA70D6" rx="11" ry="11" style="stroke: #33335B; stroke-width: 1.0;"/><path d="M126.3438,415.4111 L126.3438,415.8174 L122.1563,415.8174 L122.1563,415.4111 L122.6094,415.4111 Q122.9531,415.4111 123.0859,415.2783 Q123.2188,415.1455 123.2188,414.8799 L123.2188,405.3955 Q123.2188,405.1299 123.0859,404.9971 Q122.9531,404.8643 122.6094,404.8643 L122.2188,404.8643 L122.2188,404.458 L130.125,404.458 L130.9219,406.8486 L129.7656,407.3486 Q129.0625,405.9268 128.3281,405.3955 Q127.5938,404.8643 126.7344,404.8643 L124.875,404.8643 Q124.875,404.8643 125.0078,404.9971 Q125.1406,405.1299 125.1406,405.3955 L125.1406,409.6455 L126.4688,409.6455 Q127.125,409.6455 127.4297,409.3408 Q127.7344,409.0361 127.7344,408.3799 L127.7344,408.0518 L129.125,408.0518 L129.125,411.8955 L127.7344,411.8955 L127.7344,411.6299 Q127.7344,410.833 127.4297,410.4346 Q127.125,410.0361 126.4688,410.0361 L125.2813,410.0361 L125.2813,414.8799 Q125.2813,415.1455 125.4453,415.2783 Q125.6094,415.4111 125.6094,415.4111 L126.3438,415.4111 Z "/><text fill="#33335B" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="146.25" y="416.1406">ext_man_file</text><line style="stroke: #33335B; stroke-width: 1.5;" x1="81" x2="249" y1="426.583" y2="426.583"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="86" y="443.189">suffix: .ri.xman</text><ellipse cx="91" cy="471.6289" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="100" y="477.2349">ext_man_header</text><ellipse cx="91" cy="486.6519" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="100" y="492.2578">.fw_metadata section content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="81" x2="146.5" y1="457.1174" y2="457.1174"/><text fill="#33335B" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="146.5" y="461.7119">Content</text><line style="stroke: #33335B; stroke-width: 1.0;" x1="183.5" x2="249" y1="457.1174" y2="457.1174"/><!--MD5=[1f203a67a71b62617c784aa7b434e41e]
link firmware_elf_file to ext_man_write--><path d="M165,136.873 C165,153.783 165,172.923 165,191.143 " fill="none" id="firmware_elf_file-&gt;ext_man_write" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="165,196.253,169,187.253,165,191.253,161,187.253,165,196.253" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[434e5b391b4dbc98a671594c6bc14f89]
link ext_man_write to ext_man_file--><path d="M165,334.763 C165,352.763 165,371.983 165,389.273 " fill="none" id="ext_man_write-&gt;ext_man_file" style="stroke: #4A4A86; stroke-width: 1.0;"/><polygon fill="#4A4A86" points="165,394.573,169,385.573,165,389.573,161,385.573,165,394.573" style="stroke: #4A4A86; stroke-width: 1.0;"/><!--MD5=[2dc1ec8d8a006dfdf9b3b7e383704bf9]
@startuml
hidefootbox
skinparam componentStyle uml2

skinparam defaultFontColor	#33335b

skinparam rectangle {
	color		#d6d6de
	backgroundColor	#ffffff
}

skinparam component {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}

skinparam interface {
	backgroundColor	#ffffff
	borderColor	#f05772
}

skinparam class {
	backgroundColor	#ffffff
	borderColor	#33335b
	arrowColor	#f05772
}
skinparam stereotypeCBackgroundColor	#6fccdd

skinparam sequence {
	arrowColor		#4a4a86
	lifeLineBorderColor	#f05772
	groupBorderColor	#a1a1ca
	boxBorderColor		#a1a1ca
	dividerBorderColor	#d6d6de
	dividerBorderThickness	1
}
skinparam participant {
	borderColor		#33335b
	backgroundColor		#ffffff
}
skinparam actor {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam state {
	borderColor		#33335b
	backgroundColor		#ffffff
}

skinparam node {
	backgroundColor		#ffffff
}

skinparam note {
	backgroundColor 	#f6ed80
	borderColor		#d6d6de
}

title Extended manifest build flow

class firmware_elf_file << (F, orchid) >> {
   suffix:
   - - Content - -
   +FW metadata section
   +other sections
}

rectangle rimage {
   class ext_man_write {
      1. Create .ri.xman file
      2. Find elf file with .fw_metadata section
      3. Read .fw_metadata section
      4. Build ext_man_header
      5. Validate sum of elements size with section size
      6. Save output to .ri.xman file
   }
}

class ext_man_file << (F, orchid) >> {
   suffix: .ri.xman
   - - Content - -
   + ext_man_header
   + .fw_metadata section content
}

firmware_elf_file -down-> ext_man_write
ext_man_write -down-> ext_man_file

@enduml

PlantUML version 1.2019.12(Sun Nov 03 18:24:54 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_321-b07
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>