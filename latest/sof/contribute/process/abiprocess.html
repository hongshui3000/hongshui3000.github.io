

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>SOF ABI Change Process &mdash; SOF Project 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/sof.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
  <script type="text/javascript" src="../../_static/js/zcaniot.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Linux SOF drivers" href="../linux/development_tree.html" />
    <link rel="prev" title="SOF Documentation Generation" href="docbuild.html" />
  <link rel="shortcut icon" href="../../_static/images/favicon.ico"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SOF Project
          

          
            
            <img src="../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to the SOF Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architectures/index.html">Supported Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algos/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guides/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Contributing to the Project</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../contribute_guidelines.html">Contribution Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../doc_guidelines.html">Documentation Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dox-source-code.html">Documenting the Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="bug-tracking.html">Bug Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="docbuild.html">SOF Documentation Generation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SOF ABI Change Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sof-abi-definitions">SOF ABI definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-process">Change process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#document-modified-fields">Document modified fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abi-change-approvers">ABI change approvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tsc">TSC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sof-driver">SOF driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../linux/development_tree.html">Linux SOF drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tsc/index.html">Technical Steering Committee (TSC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainers/index.html">SOF admin, maintainers and code owners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentations/index.html">Presentations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SOF Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Contributing to the Project</a> &raquo;</li>
        
      <li>SOF ABI Change Process</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/contribute/process/abiprocess.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sof-abi-change-process">
<span id="sof-abi-changes"></span><h1>SOF ABI Change Process<a class="headerlink" href="#sof-abi-change-process" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sof-abi-definitions">
<h2>SOF ABI definitions<a class="headerlink" href="#sof-abi-definitions" title="Permalink to this headline">¶</a></h2>
<p>The SOF ABI consists of public structs used in host-FW communication
defined in:</p>
<ul class="simple">
<li><p>src/include/kernel/</p></li>
<li><p>src/include/ipc/</p></li>
<li><p>src/include/user/</p></li>
</ul>
<p>SOF ABI versioning is defined in firmware source code documentation:
<a class="reference external" href="https://github.com/thesofproject/sof/tree/master/src/include/kernel/abi.h">src/include/kernel/abi.h</a></p>
</div>
<div class="section" id="change-process">
<h2>Change process<a class="headerlink" href="#change-process" title="Permalink to this headline">¶</a></h2>
<p>When a firmware change requires extending or modifying the public
SOF ABI, the developer must go through the ABI change process as defined
in this section. The developer must drive this process, contact the
stakeholders, request reviews (and re-reviews when needed) and coordinate
with the driver maintainers.</p>
<p>The main steps of the process are depicted in the following
state diagram:</p>
<p>The pull requests are classified in GitHub using the following
official <a class="reference external" href="https://github.com/orgs/thesofproject/projects/2">ABI Change Tracker</a>.</p>
<div class="figure align-default" id="id1">
<p class="plantuml">
<object data="../../_images/plantuml-9201ab579ffc5f62ca75b3fae32fb5978e11d058.svg" type="image/svg+xml" style="width:576px;height:1357px;">
<img src="../../_images/plantuml-9201ab579ffc5f62ca75b3fae32fb5978e11d058.png" alt="[*] --&gt; NewABIChange: Firmware feature that requires ABI change

NewABIChange --&gt; RFC: Send RFC Pull Request\ncovering interface changes\n and rationale for the change

note right of RFC : RFC stage is intended to\navoid wasted effort via early\n engagement with the ABI users

RFC --&gt; RFCApproved: a) Approve+1 from at least\none Driver and one FW Maintainer,\n b) Owners assigned for FW and driver impl

NewABIChange --&gt; FWImplementation: Fast path implementation\nonly when no driver impact

RFCApproved --&gt; FWImplementation: Implementation done, submit as non-RFC PR

FWImplementation --&gt; ABIClassification: Tag PR for ABI classifier

ABIClassification --&gt; ABIApproved: TSC member approval and\nABI MAJOR.MINOR classification done

ABIApproved --&gt; DriverPRCheck: If driver change is needed,\nwait until both sides ready for merge

DriverPRCheck --&gt; FWChangeMerged: No driver change:\nAfter review and validation ok, merge

DriverPRCheck --&gt; DrvChangeMerged: After review and\nvalidation ok, merge

DrvChangeMerged --&gt; FWChangeMerged: After review and\nvalidation ok, merge
"/>

</object></p>
<p class="caption"><span class="caption-number">Figure 80 </span><span class="caption-text">ABI process state diagram</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>When the ABI change is not backwards-compatible, Pull Requests on the
kernel side shall include code that deals with older firmware and
topology files. See <a class="reference internal" href="../linux/development_tree.html#development-tree"><span class="std std-ref">Linux SOF drivers</span></a> for kernel side
documentation.</p>
</div>
<div class="section" id="document-modified-fields">
<h2>Document modified fields<a class="headerlink" href="#document-modified-fields" title="Permalink to this headline">¶</a></h2>
<p>When the interface is extended with a backwards-compatible (MINOR) interface
change, each added or modified interface field must be documented
with a reference to the interface version where the change was
first implemented.</p>
<p>Some code examples:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">foo</span> <span class="p">{</span>
        <span class="kt">uint8_t</span> <span class="n">group_id</span><span class="p">;</span>           <span class="cm">/**&lt; group ID, 0 means no group (ABI3.17) */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">bar</span> <span class="p">{</span>
      <span class="n">EXT_MAN_ELEM_FOO_DATA</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>    <span class="cm">/**&lt; ABI3.18 */</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="abi-change-approvers">
<h2>ABI change approvers<a class="headerlink" href="#abi-change-approvers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tsc">
<h3>TSC<a class="headerlink" href="#tsc" title="Permalink to this headline">¶</a></h3>
<p>Approval from an SOF <a class="reference internal" href="../../tsc/index.html#tsc"><span class="std std-ref">Technical Steering Committee (TSC)</span></a> member is needed for all ABI changes.</p>
</div>
<div class="section" id="sof-driver">
<h3>SOF driver<a class="headerlink" href="#sof-driver" title="Permalink to this headline">¶</a></h3>
<p>Linux driver team approval for changes can be granted by any member of the
SOF Linux driver maintainer team. The current list of members is maintained
in <a class="reference internal" href="../linux/development_tree.html#sof-drv-maintainer-list"><span class="std std-ref">Development flow</span></a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../linux/development_tree.html" class="btn btn-neutral float-right" title="Linux SOF drivers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="docbuild.html" class="btn btn-neutral" title="SOF Documentation Generation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2021, SOF Project..
      Last updated on May 10, 2022.

    </p>
</td>
<td id="zcanlogo">
  <a href="https://www.unisim-micro.com/"><img src="../../_static/images/zcan.svg" border="0" style="position:static"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> SOF Project</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version zcansdk">
        <a href="../../../zcansdk/index.html">ZCAN IOT SDK</a>
      </div>
      
      <div class="rst-other-version zcanxlib">
        <a href="../../../zcanxlib/README.html">ZCAN Xlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>