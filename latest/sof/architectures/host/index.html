

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Host Architecture &mdash; SOF Project 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/sof.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
  <script type="text/javascript" src="../../_static/js/zcaniot.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DSP Architecture" href="../dsp/index.html" />
    <link rel="prev" title="Supported Architectures" href="../index.html" />
  <link rel="shortcut icon" href="../../_static/images/favicon.ico"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SOF Project
          

          
            
            <img src="../../_static/logo_sof_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://sofproject.org">SOF project website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction to the SOF Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Supported Architectures</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Host Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sof-driver-architecture">SOF Driver Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux-driver">Linux Driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dsp/index.html">DSP Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/index.html">Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algos/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guides/index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contributing to the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsc/index.html">Technical Steering Committee (TSC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainers/index.html">SOF admin, maintainers and code owners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentations/index.html">Presentations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SOF Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Supported Architectures</a> &raquo;</li>
        
      <li>Host Architecture</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/architectures/host/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="host-architecture">
<span id="architecture-host"></span><h1>Host Architecture<a class="headerlink" href="#host-architecture" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sof-driver-architecture">
<h2>SOF Driver Architecture<a class="headerlink" href="#sof-driver-architecture" title="Permalink to this headline">¶</a></h2>
<p>Sound Open Firmware can either operate as a standalone firmware or alongside a host OS
driver for configuration and control. The Sound Open Firmware OS driver is responsible for
loading firmware, loading configuration and managing firmware use cases.
Currently Sound Open Firmware has a driver for the Linux OS.</p>
<p>The Sound Open Firmware driver code is dual licensed GPLv2 and BSD and this means the user
can choose which licence they want to use (either BSD or GPLv2). The driver
stack is designed with maximum resuse so that large portions of it can be
taken and integrated into other OSs or RTOSs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Refer to the indepth <a class="reference internal" href="../../developer_guides/linux_driver/architecture/sof_driver_arch.html#sof-driver-arch"><span class="std std-ref">SOF Driver Architecture</span></a> document for more information.</p>
</div>
<div class="section" id="linux-driver">
<h3>Linux Driver<a class="headerlink" href="#linux-driver" title="Permalink to this headline">¶</a></h3>
<p>The Linux ASoC driver is upstream in the Linux kernel from v5.2 onwards. The
architecture for Sound Open Firmware is shown in the diagram below. The driver
architecture is split into four layers, like a protocol stack, each with a
different purpose.</p>
<ol class="arabic">
<li><p><strong>Machine driver.</strong> The ASoC machine driver does all the
machine/board audio hardware integration. It also glues the platform
driver and drivers for any codec(s) together so they appear as a single
ALSA sound card. Sound Open Firmware can reuse existing upstream machine drivers (as
only the platform name needs to be changed) or can have bespoke machine
drivers. <em>Linux OS specific - GPLv2 only.</em></p></li>
<li><p><strong>Generic PCM Driver.</strong> The PCM driver creates ALSA PCMs, DAPM, and
kcontrols based on the topology data loaded at run time. The PCM driver
also allocates buffers for DMA and registers with run time PM. It is
architecture and platform generic code. Generic for all <strong>platforms</strong>,
but OS specific - GPLv2 only.*</p></li>
<li><p><strong>Generic IPC driver.</strong> The IPC driver is the messaging bridge
between the host and DSP and defines the messaging ABI and protocol. It
is architecture and platform generic code. <em>Generic OS - BSD or GPLv2.</em></p></li>
<li><p><strong>DSP Platform Driver.</strong> The platform driver is a platform specific
driver that abstracts the low level platform DSP hardware into a common
generic API that is used by the upper layers. This includes code that
will initialize the DSP and boot the firmware. <em>Generic OS - BSD or GPLv2.</em></p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/driver-arch-diag.png"><img alt="SOF Driver Architecture" src="../../_images/driver-arch-diag.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-number">Figure 3 </span><span class="caption-text"><cite>Sound Open Firmware Linux Driver Architecture. The right-hand side of
the diagram shows the mailbox/doorbell mechanism and the DSP.
The Linux PCM and IPC drivers can be reused without modification on every
platform. Runtime differentiation can be achived by regenerating
topology data to match device use cases whilst static hardware
differentiation is achieved via the machine driver and/or ACPI / Device
Tree configuration.</cite></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dsp/index.html" class="btn btn-neutral float-right" title="DSP Architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Supported Architectures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2021, SOF Project..
      Last updated on May 10, 2022.

    </p>
</td>
<td id="zcanlogo">
  <a href="https://www.unisim-micro.com/"><img src="../../_static/images/zcan.svg" border="0" style="position:static"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> SOF Project</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version zcansdk">
        <a href="../../../zcansdk/index.html">ZCAN IOT SDK</a>
      </div>
      
      <div class="rst-other-version zcanxlib">
        <a href="../../../zcanxlib/README.html">ZCAN Xlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>