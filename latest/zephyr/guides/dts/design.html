

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Design goals &mdash; Zephyr Project Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/zephyr.css" type="text/css" />

  
  

  
  

  

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-210766333-2"></script>
        <script src="../../_static/js/ga-tracker.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
  <script type="text/javascript" src="../../_static/js/zcaniot.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Devicetree bindings" href="bindings.html" />
    <link rel="prev" title="Introduction to devicetree" href="intro.html" />
  <link rel="shortcut icon" href="../../_static/images/favicon.ico"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Zephyr Project
          

          
          </a>

          
            
            
              <div class="version">
                3.0.99
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_process/index.html">Development and Contribution Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/index.html">Build and Configuration Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User and Developer Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../beyond-GSG.html">Beyond the Getting Started Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../arch/index.html">Architecture-related Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bluetooth/index.html">Bluetooth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docs/index.html">Documentation Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code-relocation.html">Code And Data Relocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crypto/index.html">Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flash_debug/index.html">Flashing and Hardware Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debug_tools/index.html">Debugging and Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_mgmt/index.html">Device Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Devicetree Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction to devicetree</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Design goals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#single-source-for-all-hardware-information">Single source for all hardware information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-compatibility-with-other-operating-systems">Source compatibility with other operating systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="bindings.html">Devicetree bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="api-usage.html">Devicetree access from C/C++</a></li>
<li class="toctree-l3"><a class="reference internal" href="howtos.html">Devicetree HOWTOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshooting.html">Troubleshooting devicetree</a></li>
<li class="toctree-l3"><a class="reference internal" href="dt-vs-kconfig.html">Devicetree versus Kconfig</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../env_vars.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pinctrl/index.html">Pin Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../emulator/index.html">Peripheral and Hardware Emulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html">Modules (External projects)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platformio/index.html">Using with PlatformIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../portability/index.html">OS Abstraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../porting/index.html">Porting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../smf/index.html">State Machine Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../test/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tfm/index.html">Trusted Firmware-M</a></li>
<li class="toctree-l2"><a class="reference internal" href="../west/index.html">West (Zephyr’s meta-tool)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimizations/index.html">Optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr_cmake_package.html">Zephyr CMake Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boards/index.html">Supported Boards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Zephyr Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">User and Developer Guides</a> &raquo;</li>
        
          <li><a href="index.html">Devicetree Guide</a> &raquo;</li>
        
      <li>Design goals</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/guides/dts/design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="design-goals">
<span id="dt-design"></span><h1>Design goals<a class="headerlink" href="#design-goals" title="Permalink to this headline">¶</a></h1>
<p>Zephyr’s use of devicetree has evolved significantly over time, and further
changes are expected. The following are the general design goals, along with
specific examples about how they impact Zephyr’s source code, and areas where
more work remains to be done.</p>
<div class="section" id="single-source-for-all-hardware-information">
<h2>Single source for all hardware information<a class="headerlink" href="#single-source-for-all-hardware-information" title="Permalink to this headline">¶</a></h2>
<p>Zephyr shall obtain its hardware descriptions exclusively from devicetree.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New device drivers shall use devicetree APIs to determine which <a class="reference internal" href="howtos.html#dt-create-devices"><span class="std std-ref">devices
to create</span></a> if possible.</p></li>
<li><p>In-tree sample applications shall use <a class="reference internal" href="intro.html#dt-alias-chosen"><span class="std std-ref">aliases</span></a> to
determine which of multiple possible generic devices of a given type will be
used in the current build. For example, the <a class="reference internal" href="../../samples/basic/blinky/README.html#blinky-sample"><span class="std std-ref">Blinky</span></a> uses this to
determine the LED to blink.</p></li>
<li><p>Boot-time pin muxing and pin control can be accomplished via devicetree.</p></li>
</ul>
</div>
<div class="section" id="example-remaining-work">
<h3>Example remaining work<a class="headerlink" href="#example-remaining-work" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Zephyr’s <a class="reference internal" href="../test/twister.html#twister-script"><span class="std std-ref">Test Runner (Twister)</span></a> currently use <code class="file docutils literal notranslate"><span class="pre">board.yaml</span></code> files to
determine the hardware supported by a board. This should be obtained from
devicetree instead.</p></li>
<li><p>Various device drivers currently use Kconfig to determine which instances of a
particular compatible are enabled. This can and should be done with devicetree
overlays instead.</p></li>
<li><p>Board-level documentation still contains tables of hardware support which are
generated and maintained by hand. This can and should be obtained from the
board level devicetree instead.</p></li>
<li><p>Runtime determination of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code> relationships should be done using
information obtained from devicetree, e.g. for device power management.</p></li>
</ul>
</div>
</div>
<div class="section" id="source-compatibility-with-other-operating-systems">
<span id="dt-source-compatibility"></span><h2>Source compatibility with other operating systems<a class="headerlink" href="#source-compatibility-with-other-operating-systems" title="Permalink to this headline">¶</a></h2>
<p>Zephyr’s devicetree tooling is based on a generic layer which is interoperable
with other devicetree users, such as the Linux kernel.</p>
<p>Zephyr’s binding language <em>semantics</em> can support Zephyr-specific attributes,
but shall not express Zephyr-specific relationships.</p>
<div class="section" id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Zephyr’s devicetree source parser, <a class="reference internal" href="intro.html#dt-scripts"><span class="std std-ref">dtlib.py</span></a>, is
source-compatible with other tools like <a class="reference external" href="https://git.kernel.org/pub/scm/utils/dtc/dtc.git/about/">dtc</a> in both directions:
<code class="file docutils literal notranslate"><span class="pre">dtlib.py</span></code> can parse <code class="docutils literal notranslate"><span class="pre">dtc</span></code> output, and <code class="docutils literal notranslate"><span class="pre">dtc</span></code> can parse
<code class="file docutils literal notranslate"><span class="pre">dtlib.py</span></code> output.</p></li>
<li><p>Zephyr’s “extended dtlib” library, <code class="file docutils literal notranslate"><span class="pre">edtlib.py</span></code>, shall not include
Zephyr-specific features. Its purpose is to provide a higher-level view of the
devicetree for common elements like interrupts and buses.</p>
<p>Only the high-level <code class="file docutils literal notranslate"><span class="pre">gen_defines.py</span></code> script, which is built on top of
<code class="file docutils literal notranslate"><span class="pre">edtlib.py</span></code>, contains Zephyr-specific knowledge and features.</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Example remaining work<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Zephyr has a custom <a class="reference internal" href="bindings.html#dt-bindings"><span class="std std-ref">Devicetree bindings</span></a> language <em>syntax</em>. While Linux’s
dtschema does not yet meet Zephyr’s needs, we should try to follow what it is
capable of representing in Zephyr’s own bindings.</p></li>
<li><p>Due to inflexibility in the bindings language, Zephyr cannot support the full
set of bindings supported by Linux.</p></li>
<li><p>Devicetree source sharing between Zephyr and Linux is not done.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bindings.html" class="btn btn-neutral float-right" title="Devicetree bindings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="Introduction to devicetree" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; <a href="../../copyright.html">Copyright</a> 2015-2022 Zephyr Project members and individual contributors.
      Last updated on May 10, 2022.

    </p>
</td>
<td id="zcanlogo">
  <a href="https://www.unisim-micro.com/"><img src="../../_static/images/zcan.svg" border="0" style="position:static"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Zephyr Project</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version zcansdk">
        <a href="../../../zcansdk/index.html">ZCAN IOT SDK</a>
      </div>
      
      <div class="rst-other-version zcanxlib">
        <a href="../../../zcanxlib/README.html">ZCAN Xlib</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version sof">
        <a href="../../../sof/index.html">SOF</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>