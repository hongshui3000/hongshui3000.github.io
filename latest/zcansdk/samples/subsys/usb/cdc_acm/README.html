

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>USB CDC ACM Sample Application &mdash; ZCAN IOT SDK 0.0.01 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/zc.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/common.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/zcansdk.css" type="text/css" />

  
  

  
  

  

  
  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="https://www.googletagmanager.com/gtag/js?id=UA-210766333-2"></script>
        <script src="../../../../_static/js/ga-tracker.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
  <script type="text/javascript" src="../../../../_static/js/zcaniot.js"></script>

    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
  <link rel="shortcut icon" href="../../../../_static/images/favicon.ico"/>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> ZCAN IOT SDK
          

          
          </a>

          
            
            
              <div class="version">
                0.0.01
              </div>
            
          

          
<div id="searchbox" role="search">
  <div class="searchformwrapper">
    <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
<script>$('#searchbox').show(0);</script>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">About the ZCAN IOT SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../documentation.html">About this documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../protocols.html">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">Applications and samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../libraries.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release_notes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">ZCAN IOT SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>USB CDC ACM Sample Application</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/samples/subsys/usb/cdc_acm/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usb-cdc-acm-sample-application">
<span id="usb-cdc-acm"></span><h1>USB CDC ACM Sample Application<a class="headerlink" href="#usb-cdc-acm-sample-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This sample app demonstrates use of a USB Communication Device Class (CDC)
Abstract Control Model (ACM) driver provided by the Zephyr project.
Received data from the serial port is echoed back to the same port
provided by this driver.
This sample can be found under <a href="#id1"><span class="problematic" id="id2">:zephyr_file:`samples/subsys/usb/cdc_acm`</span></a> in the
Zephyr project tree.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>This project requires an USB device driver, which is available for multiple
boards supported in Zephyr.</p>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running<a class="headerlink" href="#building-and-running" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reel-board">
<h3>Reel Board<a class="headerlink" href="#reel-board" title="Permalink to this headline">¶</a></h3>
<p>To see the console output of the app, open a serial port emulator and
attach it to the USB to TTL Serial cable. Build and flash the project:</p>
</div>
<div class="section" id="running">
<h3>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h3>
<p>Plug the board into a host device, for example, a PC running Linux.
The board will be detected as shown by the Linux dmesg command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">usb 9-1: new full-speed USB device number 112 using uhci_hcd</span>
<span class="go">usb 9-1: New USB device found, idVendor=8086, idProduct=f8a1</span>
<span class="go">usb 9-1: New USB device strings: Mfr=1, Product=2, SerialNumber=3</span>
<span class="go">usb 9-1: Product: CDC-ACM</span>
<span class="go">usb 9-1: Manufacturer: Intel</span>
<span class="go">usb 9-1: SerialNumber: 00.01</span>
<span class="go">cdc_acm 9-1:1.0: ttyACM1: USB ACM device</span>
</pre></div>
</div>
<p>The app prints on serial output (UART1), used for the console:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Wait for DTR</span>
</pre></div>
</div>
<p>Open a serial port emulator, for example minicom
and attach it to detected CDC ACM device:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">minicom --device /dev/ttyACM1</span>
</pre></div>
</div>
<p>The app should respond on serial output with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DTR set, start test</span>
<span class="go">Baudrate detected: 115200</span>
</pre></div>
</div>
<p>And on ttyACM device, provided by zephyr USB device stack:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Send characters to the UART device</span>
<span class="go">Characters read:</span>
</pre></div>
</div>
<p>The characters entered in serial port emulator will be echoed back.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>If the ModemManager runs on your operating system, it will try
to access the CDC ACM device and maybe you can see several characters
including “AT” on the terminal attached to the CDC ACM device.
You can add or extend the udev rule for your board to inform
ModemManager to skip the CDC ACM device.
For this example, it would look like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ATTRS{idVendor}==&quot;8086&quot; ATTRS{idProduct}==&quot;f8a1&quot;, ENV{ID_MM_DEVICE_IGNORE}=&quot;1&quot;
</pre></div>
</div>
<p>You can use
<code class="docutils literal notranslate"><span class="pre">/lib/udev/rules.d/77-mm-usb-device-blacklist.rules</span></code> as reference.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">

<table>
<tr>
<td>
    <p>
        &copy; Copyright 2019-2022, ZCAN.
      Last updated on May 10, 2022.

    </p>
</td>
<td id="zcanlogo">
  <a href="https://www.unisim-micro.com/"><img src="../../../../_static/images/zcan.svg" border="0" style="position:static"/></a>
</td>
</tr>
</table>
  </div> 


</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> ZCAN IOT SDK</span>
       <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <div class="rst-other-version zcanxlib">
        <a href="../../../../../zcanxlib/README.html">ZCAN Xlib</a>
      </div>
      
      <div class="rst-other-version zephyr">
        <a href="../../../../../zephyr/index.html">Zephyr Project</a>
      </div>
      
      <div class="rst-other-version mcuboot">
        <a href="../../../../../mcuboot/wrapper.html">MCUboot</a>
      </div>
      
      <div class="rst-other-version sof">
        <a href="../../../../../sof/index.html">SOF</a>
      </div>
      
      <div class="rst-other-version kconfig">
        <a href="../../../../../kconfig/index.html">Kconfig Reference</a>
      </div>
    </div>
  </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>